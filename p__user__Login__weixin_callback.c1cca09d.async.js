(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[6079],{12034:function(m){m.exports={container:"container___3-3a-",piciframe:"piciframe___XzBO3",otherWay:"otherWay___18Auy",callbackContainer:"callbackContainer___35qY0",callbackSpin:"callbackSpin___23LRG"}},74801:function(m,E,e){"use strict";e.r(E);var W=e(20228),p=e(11382),b=e(34792),f=e(48086),t=e(39428),l=e(11849),v=e(3182),A=e(67294),u=e(2521),U=e(54083),I=e(11768),C=e(12034),D=e.n(C),h=e(85893),L=function(o){var P=(0,u.tT)("@@initialState"),i=P.initialState,T=P.setInitialState,M=o.location.query&&o.location.query.code?o.location.query.code:"",j=function(){var c=(0,v.Z)((0,t.Z)().mark(function _(){var s,n;return(0,t.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i==null||(s=i.fetchUserInfo)===null||s===void 0?void 0:s.call(i);case 2:if(n=r.sent,!n){r.next=6;break}return r.next=6,T(function(O){return(0,l.Z)((0,l.Z)({},O),{},{currentUser:n})});case 6:case"end":return r.stop()}},_)}));return function(){return c.apply(this,arguments)}}(),y=function(){var c=(0,v.Z)((0,t.Z)().mark(function _(s){var n,d,r;return(0,t.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(0,U.V$)((0,l.Z)({},s));case 3:if(n=a.sent,n.success!==!0){a.next=15;break}return f.default.success("\u767B\u5F55\u6210\u529F\uFF01"),I.ZP.save("userInfo",n.data,{path:"/",expires:new Date(new Date().getTime()+24*3600*1e3*7)}),a.next=9,j();case 9:if(u.m8){a.next=11;break}return a.abrupt("return");case 11:return d=u.m8.location.query,r=d.redirect,r?parent.location.href=r:parent.location.href="/",a.abrupt("return");case 15:setUserLoginState(n),a.next=21;break;case 18:a.prev=18,a.t0=a.catch(0),f.default.error("\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01");case 21:case"end":return a.stop()}},_,null,[[0,18]])}));return function(s){return c.apply(this,arguments)}}();if(M!==""){var R={code:M};y(R)}else parent.location.href="/#/passport/weixin";return(0,h.jsx)("div",{className:D().callbackContainer,children:(0,h.jsx)(p.Z,{className:D().callbackSpin,size:"large"})})};E.default=L}}]);
