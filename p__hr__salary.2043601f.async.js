(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[1873],{89336:function(G){G.exports={avatarHolder:"avatarHolder___3Y0eK",name:"name___3BRCu",detail:"detail___35J6z",tagsTitle:"tagsTitle___1VJj7",teamTitle:"teamTitle___fIyzL",tags:"tags___22faA",team:"team___3HQqP",tabsCard:"tabsCard___1rbWE","ant-picker-input":"ant-picker-input___3coGd",leftContainer:"leftContainer___2My_Z",rightContainer:"rightContainer___21M5F",year:"year___1g3kn","ant-timeline":"ant-timeline___26RHL","ant-timeline-alternate":"ant-timeline-alternate___kF21f","ant-timeline-item-right":"ant-timeline-item-right___3iDOv","ant-timeline-item-content":"ant-timeline-item-content___2vWD9","ant-timeline-item-head":"ant-timeline-item-head___2GQGo","ant-timeline-right":"ant-timeline-right___RJMYW","ant-timeline-label":"ant-timeline-label___1-Jjb",plan:"plan___23ykp",report:"report___1lYNH"}},57304:function(G,A,t){"use strict";t.r(A),t.d(A,{default:function(){return Fe}});var h=t(58024),T=t(91894),p=t(66456),j=t(55499),D=t(62350),K=t(24565),I=t(57663),U=t(71577),O=t(34792),z=t(48086),P=t(71153),b=t(60331),o=t(2824),Q=t(15873),_=t(73218),d=t(1870),c=t(67724),E=t(8812),r=t(67294),w=t(2521),g=t(30381),je=t.n(g),Ee=t(75362),$=t(61955),Ne=t(22385),re=t(89456),Xe=t(17462),ie=t(76772),se=t(39428),Ze=t(3182),H=t(952),Se=t(37476),J=t(5966),x=t(5436),pe=t(89336),De=t.n(pe),e=t(85893),Ce=function(Z){var F=Z.done,k=Z.visible,l=Z.current,N=Z.onDone,X=Z.onSubmit,L=Z.children;if(!k)return null;var u=l==null?void 0:l.salary,s=l==null?void 0:l.kaoqin,q=s&&s.status==1?60*s.kaoqin1.jiaban_num:0,R=s?s.kaoqin1.days:22,f=R*7,ee=u?u.base:0,ne=s?s.kaoqin1.shijia:0,Y=u?u.leave_k:(ee/f*ne).toFixed(2),v=(0,r.useState)(Y),W=(0,o.Z)(v,2),V=W[0],M=W[1],te=function(y){if(s&&s.status==1){var m=(y/f*s.kaoqin1.shijia).toFixed(2);M(m)}};return(0,e.jsx)(Se.Y,{visible:k,title:"\u5F55\u5165\u5DE5\u8D44\u5355",className:De().standardListForm,width:840,onFinish:function(){var S=(0,Ze.Z)((0,se.Z)().mark(function y(m){return(0,se.Z)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:m.uid=l.id,m.time=l.time,m.leave_k||(m.leave_k=V),X(m);case 4:case"end":return B.stop()}},y)}));return function(y){return S.apply(this,arguments)}}(),submitter:{render:function(y,m){return F?null:m}},trigger:(0,e.jsx)(e.Fragment,{children:L}),modalProps:{onCancel:function(){M(0),N()},destroyOnClose:!0,bodyStyle:F?{padding:"72px 0"}:{}},children:F?"":(0,e.jsxs)(e.Fragment,{children:[s&&s.status==1?(0,e.jsx)(ie.Z,{message:l.name+"\u672C\u6708\u8003\u52E4\u5DF2\u6838\u7B97\u5B8C\u6BD5\uFF0C\u53EF\u81EA\u52A8\u5173\u8054\u5F53\u6708\u5DE5\u8D44\u5355",type:"success"}):(0,e.jsx)(ie.Z,{message:l.name+"\u672C\u6708\u8003\u52E4\u672A\u6838\u7B97\u5B8C\u6210\uFF0C\u4E0D\u4F1A\u81EA\u52A8\u5173\u8054\u5F53\u6708\u5DE5\u8D44\u5355\uFF0C\u5EFA\u8BAE\u5148\u8FDB\u884C\u8003\u52E4\u6838\u7B97\uFF01",type:"error"}),(0,e.jsx)("br",{}),(0,e.jsxs)(H.ZP.Group,{children:[(0,e.jsx)(J.Z,{width:"sm",name:"name",disabled:!0,label:"\u5458\u5DE5",initialValue:l==null?void 0:l.name}),(0,e.jsx)(J.Z,{width:"sm",name:"time",disabled:!0,label:"\u65F6\u95F4",initialValue:l==null?void 0:l.time_str})]}),(0,e.jsxs)(H.ZP.Group,{children:[(0,e.jsx)(x.Z,{label:"\u57FA\u672C\u5DE5\u8D44",name:"base",min:0,width:"sm",initialValue:u==null?void 0:u.base,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u57FA\u672C\u5DE5\u8D44"}],onChange:function(y){return te(y)}}),(0,e.jsx)(x.Z,{label:(0,e.jsxs)(e.Fragment,{children:["\u52A0\u73ED\u8865\u8D34 ",s&&s.status==1?(0,e.jsx)(re.Z,{title:"\u52A0\u73ED\u8865\u8D3460\u5143\u4E00\u6B21",children:(0,e.jsxs)("span",{style:{color:"blue"},children:["(\u672C\u6708\u52A0\u73ED",s.kaoqin1.jiaban_num,"\u6B21)"]})}):""]}),name:"jiaban_allowance",min:0,width:"sm",initialValue:s&&s.status==1?q:0}),(0,e.jsx)(x.Z,{label:"\u5176\u5B83\u8865\u8D34",name:"allowance",min:0,width:"sm",initialValue:u==null?void 0:u.allowance})]}),(0,e.jsxs)(H.ZP.Group,{children:[(0,e.jsx)(x.Z,{label:"\u793E\u4FDD\u6263\u6B3E",name:"shebao_k",initialValue:u?u.shebao_k:477.87,min:0,width:"sm",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u793E\u4FDD\u6263\u6B3E"}]}),(0,e.jsx)(x.Z,{label:"\u516C\u79EF\u91D1\u6263\u6B3E",name:"gongjijin_k",initialValue:u?u.gongjijin_k:152,min:0,width:"sm",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u516C\u79EF\u91D1\u6263\u6B3E"}]}),(0,e.jsx)(x.Z,{label:"\u4E2A\u7A0E\u6263\u6B3E",name:"shui_k",min:0,width:"sm",initialValue:u?u.shui_k:0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u4E2A\u7A0E\u6263\u6B3E"}]}),(0,e.jsx)(x.Z,{label:(0,e.jsxs)(e.Fragment,{children:["\u8003\u52E4\u6263\u6B3E ",s&&s.status==1?(0,e.jsx)(re.Z,{title:"\u8003\u52E4\u6263\u6B3E = \u5E94\u53D1\u5DE5\u8D44 / \u672C\u6708\u8003\u52E4\u5929\u6570"+R+"\u5929 / 7\u5C0F\u65F6 * \u4E8B\u5047\u5C0F\u65F6\u6570",children:(0,e.jsxs)("span",{style:{color:"blue"},children:["(\u4E8B\u5047",s.kaoqin1.shijia,"\u5C0F\u65F6)"]})}):""]}),name:"leave_k",min:0,width:"sm",value:V}),(0,e.jsx)(x.Z,{label:"\u5176\u4ED6\u6263\u6B3E",name:"qita_k",min:0,width:"sm",initialValue:u?u.qita_k:0})]}),(0,e.jsx)(J.Z,{name:"remark",label:"\u5907\u6CE8\u8BF4\u660E",placeholder:"\u53EF\u4EE5\u5728\u6B64\u5904\u8BF4\u660E\u8865\u8D34\u6216\u6263\u6B3E\u60C5\u51B5",initialValue:u?u.remark:0})]})})},be=Ce,_e=function(){var Z=(0,r.useRef)(),F=(0,r.useState)(!1),k=(0,o.Z)(F,2),l=k[0],N=k[1],X=(0,r.useState)(),L=(0,o.Z)(X,2),u=L[0],s=L[1],q=(0,r.useState)(2024),R=(0,o.Z)(q,2),f=R[0],ee=R[1],ne=(0,r.useState)("01"),Y=(0,o.Z)(ne,2),v=Y[0],W=Y[1],V=(0,r.useState)([]),M=(0,o.Z)(V,2),te=M[0],S=M[1],y=(0,r.useState)(0),m=(0,o.Z)(y,2),Re=m[0],B=m[1],Me=(0,r.useState)([]),ue=(0,o.Z)(Me,2),qe=ue[0],Be=ue[1],Ae=(0,r.useState)(!0),le=(0,o.Z)(Ae,2),Te=le[0],Ie=le[1],Oe=(0,w.QT)($.gp,{manual:!0,onSuccess:function(a,n){me(!1),ae(!1),S(a.users),B(a.total_money),ee(a.year),W(a.month),Be(a.total),Ie(!1)}}),C=Oe.run;(0,r.useEffect)(function(){C()},[]);var oe=function(a){a==-1?C({tab:"prev",year:f,month:v}):a==1&&C({tab:"next",year:f,month:v})},Pe=[{title:"\u5458\u5DE5",dataIndex:"user_name",render:function(a,n){return n.id>0?(0,e.jsxs)("a",{onClick:function(){s(n),N(n)},children:[n.name," "]}):a},width:"300",align:"left",search:!1,fixed:"left"},{title:"\u65F6\u95F4",dataIndex:"time",width:"150",align:"center",search:!1,render:function(a){return(0,e.jsxs)("span",{children:[a>0?je()(parseInt(a)*1e3).format("YYYY-MM"):""," "]})}},{title:"\u5E94\u53D1\u5DE5\u8D44",search:!1,children:[{title:"\u57FA\u672C\u5DE5\u8D44",dataIndex:"base",key:"base",align:"center",render:function(a,n){return n.salary?n.salary.base:""}},{title:"\u52A0\u73ED\u8865\u8D34",dataIndex:"jiaban_allowance",key:"jiaban_allowance",align:"center",render:function(a,n){return n.salary?n.salary.jiaban_allowance:""}},{title:"\u5176\u4ED6\u8865\u8D34",dataIndex:"allowance",key:"allowance",align:"center",render:function(a,n){return n.salary?n.salary.allowance:""}},{title:"\u5408\u8BA1",dataIndex:"yingfa",width:"150",key:"yingfa",align:"center",render:function(a,n){return n.salary?n.salary.yingfa:""}}]},{title:"\u5E94\u6263\u5DE5\u8D44",search:!1,children:[{title:"\u793E\u4FDD",dataIndex:"shebao_k",key:"shebao_k",align:"center",render:function(a,n){return n.salary?n.salary.shebao_k:""}},{title:"\u516C\u79EF\u91D1",dataIndex:"gongjijin_k",key:"gongjijin_k",align:"center",render:function(a,n){return n.salary?n.salary.gongjijin_k:""}},{title:"\u4E2A\u7A0E",dataIndex:"shui_k",key:"shui_k",align:"center",render:function(a,n){return n.salary?n.salary.shui_k:""}},{title:"\u8003\u52E4\u6263\u6B3E",dataIndex:"leave_k",key:"leave_k",align:"center",render:function(a,n){return n.salary?n.salary.leave_k:""}},{title:"\u5176\u4ED6\u6263\u6B3E",dataIndex:"qita_k",key:"qita_k",align:"center",render:function(a,n){return n.salary?n.salary.qita_k:""}},{title:"\u5408\u8BA1",dataIndex:"yingkou",key:"yingkou",align:"center",render:function(a,n){return n.salary?n.salary.yingkou:""}}]},{title:"\u5B9E\u53D1",dataIndex:"shifa",key:"shifa",width:"60",align:"center",search:!1,render:function(a,n){return(0,e.jsx)("span",{style:{color:"orange",fontWeight:"bold"},children:n.salary?(0,e.jsx)(e.Fragment,{children:n.salary.shifa}):""})}},{title:"\u63A8\u9001",dataIndex:"is_send",key:"is_send",hideInForm:!0,align:"center",width:"60",render:function(a,n){return(0,e.jsx)(e.Fragment,{children:n.salary.id>0?n.salary.is_send==1?(0,e.jsx)(Q.Z,{style:{color:"green"}}):(0,e.jsx)(_.Z,{style:{color:"gray"}}):""})}},{title:"\u5458\u5DE5\u786E\u8BA4",dataIndex:"is_confirm",key:"is_confirm",hideInForm:!0,width:"60",align:"center",fixed:"right",render:function(a,n){return n.id>0?(0,e.jsx)(e.Fragment,{children:n.salary.id>0?n.salary.is_confirm==1?(0,e.jsx)(b.Z,{color:"green",children:"\u5DF2\u786E\u8BA4"}):(0,e.jsx)(b.Z,{color:"red",children:"\u672A\u786E\u8BA4"}):(0,e.jsx)(b.Z,{children:"\u672A\u6838\u7B97"})}):""}},{title:"\u64CD\u4F5C",align:"center",fixed:"right",width:60,key:"id",render:function(a,n){return n.id>0?(0,e.jsx)("a",{onClick:function(){return Ge("add",n)},children:"\u5F55\u5165"}):""}}],we=(0,r.useState)(!1),de=(0,o.Z)(we,2),ce=de[0],me=de[1],Le=(0,r.useState)(!1),he=(0,o.Z)(Le,2),Ye=he[0],ae=he[1],We=(0,r.useState)(void 0),fe=(0,o.Z)(We,2),Ve=fe[0],ve=fe[1],ye=function(a){ae(!0),ve(a)},Ge=function(a,n){a==="add"||a==="edit"?ye(n):a==="delete"&&Modal.confirm({title:"\u4F5C\u5E9F\u5DE5\u8D44\u5355",content:"\u786E\u5B9A\u4F5C\u5E9F\u5DE5\u8D44\u5355\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){return Ke(n.id)}})},Ke=function(a){ge("remove",{id:a})},Ue=(0,w.QT)(function(i,a){return i==="remove"?removeRow(a):(0,$.R2)(a)},{manual:!0,onSuccess:function(a){C({year:f,month:v})}}),ge=Ue.run,ze=function(){me(!1),ae(!1),ve({}),ce&&C({year:f,month:v})},Qe=function(a){console.log(a),ge("add",a)},$e=(0,w.QT)($.bw,{manual:!0,onSuccess:function(a,n){z.default.success("\u64CD\u4F5C\u6210\u529F"),C({year:f,month:v})}}),He=$e.run,Je=function(){console.log(1),He({year:f,month:v})};return(0,e.jsxs)(Ee.ZP,{extra:(0,e.jsx)(K.Z,{title:(0,e.jsxs)(e.Fragment,{children:["\u4E00\u65E6\u63A8\u9001\uFF0C\u5458\u5DE5\u5C06\u53EF\u4EE5\u67E5\u770B\u81EA\u5DF1\u7684\u5DE5\u8D44\u5355\u3002",(0,e.jsx)("br",{}),"\u786E\u5B9A\u5F53\u524D\u64CD\u4F5C\u5417\uFF1F"]}),onConfirm:function(){return Je()},icon:(0,e.jsx)(d.Z,{style:{color:"red"}}),children:(0,e.jsx)(U.Z,{children:"\u6279\u91CF\u63A8\u9001\u7ED9\u5458\u5DE5"})}),children:[(0,e.jsx)(T.Z,{title:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("a",{style:{paddingRight:"24px",fontSize:"14px"},onClick:function(){return oe(-1)},children:[(0,e.jsx)(c.Z,{}),"\u4E0A\u6708"]}),(0,e.jsxs)("span",{children:[f,"\u5E74",v,"\u6708"]}),(0,e.jsxs)("a",{style:{paddingLeft:"24px",fontSize:"14px"},onClick:function(){return oe(1)},children:["\u4E0B\u6708",(0,e.jsx)(E.Z,{})]})]}),children:(0,e.jsx)(j.Z,{scroll:{x:1300},columns:Pe,loading:Te,dataSource:te,pagination:!1,bordered:!0,size:"middle"})}),(0,e.jsx)(be,{done:ce,visible:Ye,current:Ve,onDone:ze,onSubmit:Qe})]})},Fe=_e},61955:function(G,A,t){"use strict";t.d(A,{gp:function(){return K},dM:function(){return U},R2:function(){return z},z4:function(){return b},bw:function(){return Q}});var h=t(39428),T=t(11849),p=t(3182),j=t(2521),D=t(43237);function K(d,c){return I.apply(this,arguments)}function I(){return I=(0,p.Z)((0,h.Z)().mark(function d(c,E){var r;return(0,h.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,j.WY)(D.h+"hr/salary/index",(0,T.Z)({method:"GET",params:(0,T.Z)({},c)},E||{}));case 2:return r=g.sent,g.abrupt("return",{data:r.data,success:r.success});case 4:case"end":return g.stop()}},d)})),I.apply(this,arguments)}function U(d){return O.apply(this,arguments)}function O(){return O=(0,p.Z)((0,h.Z)().mark(function d(c){return(0,h.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,j.WY)(D.h+"hr/salary/detail",{params:c}));case 1:case"end":return r.stop()}},d)})),O.apply(this,arguments)}function z(d){return P.apply(this,arguments)}function P(){return P=(0,p.Z)((0,h.Z)().mark(function d(c){return(0,h.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,j.WY)(D.h+"hr/salary/form",{method:"POST",data:c}));case 1:case"end":return r.stop()}},d)})),P.apply(this,arguments)}function b(d){return o.apply(this,arguments)}function o(){return o=(0,p.Z)((0,h.Z)().mark(function d(c){return(0,h.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,j.WY)(D.h+"hr/salary/confirm",{params:c}));case 1:case"end":return r.stop()}},d)})),o.apply(this,arguments)}function Q(d){return _.apply(this,arguments)}function _(){return _=(0,p.Z)((0,h.Z)().mark(function d(c){return(0,h.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,j.WY)(D.h+"hr/salary/sync_send",{params:c}));case 1:case"end":return r.stop()}},d)})),_.apply(this,arguments)}}}]);
