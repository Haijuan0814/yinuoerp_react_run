(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[5565],{76940:function(It,G,e){"use strict";e.r(G),e.d(G,{default:function(){return ht}});var Et=e(13062),at=e(71230),Pt=e(89032),Q=e(15746),Ft=e(58024),N=e(91894),Tt=e(48736),nt=e(27049),bt=e(20136),K=e(55241),W=e(39428),st=e(3182),Mt=e(18446),rt=e(90860),Yt=e(57663),D=e(71577),d=e(2824),Bt=e(18106),$=e(32267),At=e(402),ut=e(97272),P=e(49101),lt=e(92977),J=e(18267),it=e(8212),ot=e(75362),dt=e(36653),c=e(2521),i=e(67294),F=e(66822),Rt=e(66456),ct=e(55499),vt=e(30381),T=e.n(vt),X=e(722),t=e(85893),k=20,xt=function(h){var l=h.tablename,v=h.module,m=h.parent,x=[];l=="think"?x={0:{text:"\u6536\u96C6",status:"Error"},1:{text:"\u91C7\u7EB3",status:"Processing"},2:{text:"\u5B9E\u73B0",status:"Success"},"-1":{text:"\u9000\u7A3F",status:"Default"}}:l=="demand"?x={0:{text:"\u63A8\u8FDB",status:"Error"},1:{text:"\u8BBE\u8BA1",status:"Processing"},2:{text:"\u5B9E\u73B0",status:"Success"},"-1":{text:"\u9000\u7A3F",status:"Default"}}:l=="coding"?x={0:{text:"\u8BA1\u5212",status:"Error"},1:{text:"\u5F00\u53D1",status:"Processing"},2:{text:"\u6D4B\u8BD5",status:"Processing"},3:{text:"\u5B8C\u6210",status:"Success"},"-1":{text:"\u9000\u7A3F",status:"Default"}}:l=="testing"?x={0:{text:"\u6D4B\u8BD5\u4E2D",status:"Error"},1:{text:"\u5B8C\u6210",status:"Success"},"-1":{text:"\u9000\u7A3F",status:"Default"}}:l=="testitem"?x={0:{text:"\u6D4B\u8BD5\u4E2D",status:"Error"},1:{text:"\u5B8C\u6210",status:"Success"},"-1":{text:"\u9000\u7A3F",status:"Default"}}:l=="bug"&&(x={0:{text:"\u672A\u89E3\u51B3",status:"Error"},1:{text:"\u89E3\u51B3\u4E2D",status:"Processing"},2:{text:"\u5DF2\u89E3\u51B3",status:"Success"},"-1":{text:"\u9000\u7A3F",status:"Default"}});var b=(0,i.useState)(1),g=(0,d.Z)(b,2),u=g[0],M=g[1],Y=(0,i.useState)([]),S=(0,d.Z)(Y,2),B=S[0],y=S[1],A=(0,i.useState)(!0),p=(0,d.Z)(A,2),R=p[0],j=p[1],U=(0,i.useState)([]),I=(0,d.Z)(U,2),H=I[0],E=I[1],O=(0,c.QT)(F.gp,{manual:!0,onSuccess:function(s,o){y(s.data),M(s.current),E(s.total),j(!1)}}),Z=O.run;(0,i.useEffect)(function(){Z({tablename:l,parent:m,current:u,pageSize:k})},[]);var _=(0,i.useRef)(),z=(0,c.YB)(),L=function(s){s&&(v?c.m8.push({pathname:"/it/".concat(v,"/").concat(l,"/detail/").concat(s.id)}):c.m8.push({pathname:"/it/".concat(l,"/detail/").concat(s.id)}))},V=[{title:"ID",dataIndex:"id",search:!1},{title:"\u6807\u9898",dataIndex:"title",render:function(s,o){return(0,t.jsx)("div",{style:{maxWidth:"200px"},children:(0,t.jsx)("a",{onClick:function(){L(o)},children:s})})}},{title:"\u521B\u5EFA\u4EBA",dataIndex:"insert_user"},{title:"\u5904\u7406\u4EBA",dataIndex:"deal_user",search:!1},{title:"\u5173\u8054\u4EBA",dataIndex:"related_uids",search:!1,render:function(s,o){var C=s?Object.values(s):{};return(0,t.jsx)("span",{children:C.length>1?(0,t.jsxs)(K.Z,{content:o.related_user,trigger:"hover",children:[C.length,"\u4EBA"]}):""})}},{title:"\u5904\u7406\u72B6\u6001",dataIndex:"status",hideInForm:!0,render:function(s,o){return(0,t.jsx)(X.Z,{tablename:l,statusVal:s,id:o.id,row:o})}},{title:"\u6700\u8FD1\u66F4\u65B0",sorter:!0,dataIndex:"update_time",render:function(s){return(0,t.jsxs)("span",{children:[s>0?T()(parseInt(s)*1e3).format("YYYY-MM-DD HH:mm"):""," "]})},search:!1}];return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(ct.Z,{dataSource:B,loading:R,columns:V,pagination:{simple:!1,current:u,defaultCurrent:1,total:H,showSizeChanger:!0,pageSize:k,showTotal:function(s){return"\u5171"+s+"\u6761\u6570\u636E"},onChange:function(s,o){onPageChange(s)}}})})},w=xt,ft=e(97),Ut=ut.Z.Paragraph,q=$.Z.TabPane,mt=function(h){var l="coding",v="testing",m=h.match.params.id,x=[];v=="testing"?x={0:{text:"\u6D4B\u8BD5\u4E2D",status:"Error"},1:{text:"\u5B8C\u6210",status:"Success"},"-1":{text:"\u9000\u7A3F",status:"Default"}}:v=="bug"&&(x={0:{text:"\u672A\u89E3\u51B3",status:"Error"},1:{text:"\u89E3\u51B3\u4E2D",status:"Processing"},2:{text:"\u5DF2\u89E3\u51B3",status:"Success"},"-1":{text:"\u9000\u7A3F",status:"Default"}});var b=(0,i.useState)({}),g=(0,d.Z)(b,2),u=g[0],M=g[1],Y=(0,i.useState)((0,t.jsxs)(D.Z,{type:"primary",onClick:function(){j(m,"bug")},children:[(0,t.jsx)(P.Z,{})," \u521B\u5EFA\u7F3A\u9677\u53CD\u9988"]})),S=(0,d.Z)(Y,2),B=S[0],y=S[1],A=(0,c.QT)(F.dM,{manual:!0,onSuccess:function(a,r){M(a.row)}}),p=A.run;(0,i.useEffect)(function(){p({tablename:v,id:m})},[]);var R=function(a){a&&c.m8.push({pathname:l?"/it/".concat(l,"/").concat(v,"/edit/").concat(a.id):"/it/".concat(v,"/edit/").concat(a.id)})},j=function(a,r){r=="testitem"?c.m8.push({pathname:"/it/coding/testitem/create",query:{testing_id:a}}):r=="bug"&&c.m8.push({pathname:"/it/coding/bug/create",query:{testing_id:a}})},U=function(a){if(a.length>1)return a.map(function(r){return(0,t.jsx)("p",{children:r.name})})},I=function(a){a=="testitem"?y((0,t.jsxs)(D.Z,{type:"primary",onClick:function(){j(m,"testitem")},children:[(0,t.jsx)(P.Z,{})," \u521B\u5EFA\u6D4B\u8BD5\u7528\u4F8B"]})):y((0,t.jsxs)(D.Z,{type:"primary",onClick:function(){j(m,"bug")},children:[(0,t.jsx)(P.Z,{})," \u521B\u5EFA\u7F3A\u9677\u53CD\u9988"]}))},H=(0,i.useState)(!1),E=(0,d.Z)(H,2),O=E[0],Z=E[1],_=(0,i.useState)("related"),z=(0,d.Z)(_,2),L=z[0],V=z[1],f=(0,i.useState)("\u5173\u8054\u4EBA\u5458"),s=(0,d.Z)(f,2),o=s[0],C=s[1],St=function(){Z(!0)},tt=function(a,r){V(a),C(r),St()},jt=function(a){console.log(a),Z(!1),Dt(a)},Zt=function(a){Z(!1)},Ct=(0,c.QT)(function(n){return n.tablename=v,n.id=m,n.field=L,(0,F.ko)(n)},{manual:!0,onSuccess:function(a){location.reload()}}),Dt=Ct.run,yt=!u.id;return yt?(0,t.jsx)(rt.Z,{active:!0}):(0,t.jsxs)(ot.ZP,{title:u==null?void 0:u.title,children:[(0,t.jsxs)(at.Z,{gutter:24,children:[(0,t.jsx)(Q.Z,{xl:8,lg:8,md:24,sm:24,xs:24,children:(0,t.jsxs)(N.Z,{children:[(0,t.jsx)(dt.ZP,{column:1,request:(0,st.Z)((0,W.Z)().mark(function n(){return(0,W.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",{data:u||{}});case 1:case"end":return r.stop()}},n)})),params:{id:u==null?void 0:u.id},columns:[{title:"\u6240\u5C5E\u4EA7\u54C1",dataIndex:"products",column:2,render:function(a){var r=Object.values(a),et=r[0],pt=U(r);return(0,t.jsxs)("span",{children:[et.name,r.length>1?(0,t.jsx)(K.Z,{content:pt,trigger:"hover",children:(0,t.jsx)(lt.Z,{style:{color:"#1890ff"}})}):""]})}},{title:"\u521B\u5EFA\u4EBA",dataIndex:"insert_user"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"insert_time",render:function(a){return(0,t.jsxs)("span",{children:[a>0?T()(parseInt(a)*1e3).format("YYYY-MM-DD HH:mm"):""," "]})}},{title:"\u6700\u540E\u66F4\u65B0",dataIndex:"update_time",render:function(a){return(0,t.jsxs)("span",{children:[a>0?T()(parseInt(a)*1e3).format("YYYY-MM-DD HH:mm"):""," "]})}},{title:"\u8BA1\u5212\u65F6\u95F4",dataIndex:"date"},{title:"\u5904\u7406\u4EBA",dataIndex:"deal_user",render:function(a){return(0,t.jsxs)("span",{children:[a," ",(0,t.jsx)("a",{onClick:function(){return tt("deal_uids","\u5904\u7406\u4EBA\u5458")},children:(0,t.jsx)(J.Z,{})})]})}},{title:"\u5173\u8054\u4EBA",dataIndex:"related_user",render:function(a){return(0,t.jsxs)("span",{children:[a," ",(0,t.jsx)("a",{onClick:function(){return tt("related_uids","\u5173\u8054\u4EBA\u5458")},children:(0,t.jsx)(J.Z,{})})]})}},{title:"\u5904\u7406\u72B6\u6001",dataIndex:"status",render:function(a){return(0,t.jsx)(X.Z,{tablename:"testing",statusVal:a,id:u.id,row:u})}},{dataIndex:"option",render:function(a,r){return(0,t.jsxs)(D.Z,{onClick:function(){R(r)},children:[(0,t.jsx)(it.Z,{})," \u7F16\u8F91\u6587\u6863"]})}}]}),(0,t.jsx)(nt.Z,{}),(0,t.jsx)("div",{dangerouslySetInnerHTML:{__html:u.content?u.content:"\u6682\u65E0\u5185\u5BB9"},className:"editorDetail"})]})}),(0,t.jsx)(Q.Z,{xl:16,lg:16,md:24,sm:24,xs:24,children:(0,t.jsx)(N.Z,{children:(0,t.jsxs)($.Z,{defaultActiveKey:"bug",tabBarExtraContent:B,onChange:function(a){return I(a)},children:[(0,t.jsx)(q,{tab:"\u6D4B\u8BD5\u7528\u4F8B",children:(0,t.jsx)(w,{tablename:"testitem",module:"coding",parent:u==null?void 0:u.id})},"testitem"),(0,t.jsx)(q,{tab:"\u7F3A\u9677\u53CD\u9988",children:(0,t.jsx)(w,{tablename:"bug",module:"coding",parent:u==null?void 0:u.id})},"bug")]})})})]}),(0,t.jsx)(ft.Z,{visible:O,onSubmit:jt,userlabel:o,onCancel:Zt})]})},ht=mt}}]);
