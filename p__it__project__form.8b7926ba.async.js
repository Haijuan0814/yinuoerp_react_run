(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[9306],{37334:function(w,x,t){"use strict";t.r(x),t.d(x,{default:function(){return ae}});var l=t(58024),v=t(91894),j=t(48736),o=t(27049),K=t(18446),g=t(90860),C=t(39428),Z=t(3182),Q=t(34792),E=t(48086),b=t(2824),d=t(952),T=t(5966),D=t(34540),r=t(86615),s=t(90672),n=t(45510),a=t(75362),m=t(85224),Y=t(2521),M=t(67294),V=t(85123),S=t(11316),_=t(13623),q=t(64317),k=t(66822),u=t(85893),ee=function(i){var y=i.name,B=i.label,P=i.mode,e=i.value,R=i._require,O=i.tablename,G=(0,M.useState)([]),A=(0,b.Z)(G,2),I=A[0],L=A[1],W=(0,Y.QT)(k.Qf,{manual:!0,onSuccess:function(p,h){L(p.list)}}),U=W.run;return(0,M.useEffect)(function(){U({tablename:O})},[]),(0,u.jsx)(q.Z,{width:"lg",label:B,name:y,placeholder:"\u8BF7\u9009\u62E9"+B,mode:P,allowClear:!0,showSearch:!0,initialValue:e,rules:[{required:!!R,message:"\u8BF7\u9009\u62E9"+B}],options:I})},z=ee,te=t(30381),c=t.n(te),ue=function(i){var y=i.match.params.id,B=(0,M.useState)({}),P=(0,b.Z)(B,2),e=P[0],R=P[1],O=[{value:"0",label:"\u8FDB\u884C\u4E2D"},{value:"1",label:"\u5B8C\u6210"},{value:"2",label:"\u9884\u671F\u5B8C\u6210"},{value:"-1",label:"\u9000\u7A3F"}];if(JSON.stringify(i.match.params)!="{}"){var G=(0,Y.QT)(V.dM,{manual:!0,onSuccess:function(h,f){R(h.row)}}),A=G.run;(0,M.useEffect)(function(){A(i.match.params)},[])}var I=(0,Y.QT)(V.R2,{manual:!0,onSuccess:function(){E.default.success("\u63D0\u4EA4\u6210\u529F"),setTimeout(function(){y>0?Y.m8.push({pathname:"/it/manage/project/detail/".concat(y)}):Y.m8.push({pathname:"/it/manage/project"})},400)}}),L=I.run,W=function(){var p=(0,Z.Z)((0,C.Z)().mark(function h(f){var F,N,H,X;return(0,C.Z)().wrap(function($){for(;;)switch($.prev=$.next){case 0:F=f._date,N=F[0]?F[0]:e.id>0?c()(e.start_time*1e3).format("YYYY-MM-DD"):"",H=F[1]?F[1]:e.id>0?c()(e.end_time*1e3).format("YYYY-MM-DD"):"",X={id:e==null?void 0:e.id,start_time:N,end_time:H},L(Object.assign(f,X));case 5:case"end":return $.stop()}},h)}));return function(f){return p.apply(this,arguments)}}(),U=JSON.stringify(i.match.params)=="{}"?!1:!(e&&e.id),J=e.id>0?{title:e==null?void 0:e.title,_date:e.start_time>0?[c()(e.start_time*1e3).format("YYYY-MM-DD"),c()(e.end_time*1e3).format("YYYY-MM-DD")]:[],product_ids:e==null?void 0:e.product_ids,ui_uids:e==null?void 0:e.ui_uids,code_uids:e==null?void 0:e.code_uids,test_uids:e==null?void 0:e.test_uids,publish_uids:e==null?void 0:e.publish_uids,content:e==null?void 0:e.content,ui_plan_time:c()(e.ui_plan_time*1e3).format("YYYY-MM-DD"),code_plan_time:c()(e.code_plan_time*1e3).format("YYYY-MM-DD"),test_plan_time:c()(e.test_plan_time*1e3).format("YYYY-MM-DD"),publish_plan_time:c()(e.publish_plan_time*1e3).format("YYYY-MM-DD"),status:e==null?void 0:e.status}:{status:"0",is_code:"0"};return U?(0,u.jsx)(g.Z,{active:!0}):(0,u.jsx)(a.ZP,{children:(0,u.jsx)(d.ZP,{name:"basic",layout:"horizontal",initialValues:J,submitter:{render:function(h,f){return(0,u.jsx)(m.Z,{children:f})}},onFinish:W,children:(0,u.jsxs)(v.Z,{bordered:!1,title:"\u57FA\u672C\u4FE1\u606F",children:[(0,u.jsx)(T.Z,{width:"md",label:"\u7ACB\u9879\u6807\u9898",name:"title",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7ACB\u9879\u6807\u9898"}],placeholder:"\u4E00\u53E5\u8BDD\u7B80\u8FF0\u672C\u6B21\u7ACB\u9879\u7684\u6807\u9898"}),(0,u.jsx)(_.Z,{label:"\u6240\u5C5E\u4EA7\u54C1",name:"product_ids",mode:"multiple",_require:!0}),(0,u.jsx)(D.Z,{label:"\u4EFB\u52A1\u6392\u671F",width:"md",name:"_date",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4EFB\u52A1\u6392\u671F"}],placeholder:["\u5F00\u59CB\u65E5\u671F","\u7ED3\u675F\u65E5\u671F"]}),(0,u.jsx)(r.Z.Group,{options:O,label:"\u6587\u6863\u72B6\u6001",name:"status",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6587\u6863\u72B6\u6001"}]}),(0,u.jsx)(s.Z,{label:"\u9879\u76EE\u63CF\u8FF0",width:"xl",name:"content",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9879\u76EE\u63CF\u8FF0"}],placeholder:"\u8BF7\u8BE6\u7EC6\u63CF\u8FF0\u8BE5\u9879\u76EE"}),(0,u.jsx)(o.Z,{orientation:"left",plain:!0,children:"\u4EA7\u54C1\u9636\u6BB5"}),(0,u.jsxs)(d.ZP.Group,{children:[(0,u.jsx)(S.Z,{label:"\u5904\u7406\u4EBA",name:"ui_uids",mode:"multiple",_require:!0}),(0,u.jsx)(n.Z,{name:"ui_plan_time",label:"\u622A\u6B62\u65E5\u671F",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4EA7\u54C1\u622A\u6B62\u65E5\u671F"}]}),(0,u.jsx)(z,{label:"\u5173\u8054\u9700\u6C42",name:"demand_ids",mode:"multiple",tablename:"demand",_require:!1})]}),(0,u.jsx)(o.Z,{orientation:"left",plain:!0,children:"\u5F00\u53D1\u9636\u6BB5"}),(0,u.jsxs)(d.ZP.Group,{children:[(0,u.jsx)(S.Z,{label:"\u5904\u7406\u4EBA",name:"code_uids",mode:"multiple",_require:!0}),(0,u.jsx)(n.Z,{name:"code_plan_time",label:"\u622A\u6B62\u65E5\u671F",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5F00\u53D1\u622A\u6B62\u65E5\u671F"}]}),e.id>0?"":(0,u.jsx)(r.Z.Group,{radioType:"button",rules:[{required:!0,message:"\u8BF7\u786E\u8BA4\u662F\u5426\u81EA\u52A8\u521B\u5EFA\u5F00\u53D1\u4EFB\u52A1"}],options:[{value:"1",label:"\u81EA\u52A8\u521B\u5EFA"},{value:"0",label:"\u4E0D\u521B\u5EFA"}],label:"\u5F00\u53D1\u4EFB\u52A1",name:"is_code"}),(0,u.jsx)(z,{label:"\u5173\u8054\u5F00\u53D1",name:"code_ids",mode:"multiple",tablename:"coding",_require:!1})]}),(0,u.jsx)(o.Z,{orientation:"left",plain:!0,children:"\u6D4B\u8BD5\u9636\u6BB5"}),(0,u.jsxs)(d.ZP.Group,{children:[(0,u.jsx)(S.Z,{label:"\u5904\u7406\u4EBA",name:"test_uids",mode:"multiple",_require:!0}),(0,u.jsx)(n.Z,{name:"test_plan_time",label:"\u622A\u6B62\u65E5\u671F",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5F00\u53D1\u622A\u6B62\u65E5\u671F"}]})]}),(0,u.jsx)(o.Z,{orientation:"left",plain:!0,children:"\u90E8\u7F72\u9636\u6BB5"}),(0,u.jsxs)(d.ZP.Group,{children:[(0,u.jsx)(S.Z,{label:"\u5904\u7406\u4EBA",name:"publish_uids",mode:"multiple",_require:!0}),(0,u.jsx)(n.Z,{name:"publish_plan_time",label:"\u622A\u6B62\u65E5\u671F",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u90E8\u7F72\u622A\u6B62\u65E5\u671F"}]})]})]})})})},ae=ue},85123:function(w,x,t){"use strict";t.d(x,{gp:function(){return K},dM:function(){return Q},R2:function(){return b},p5:function(){return T}});var l=t(39428),v=t(3182),j=t(2521),o=t(43237);function K(r){return g.apply(this,arguments)}function g(){return g=(0,v.Z)((0,l.Z)().mark(function r(s){return(0,l.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,j.WY)(o.h+"it/project/index",{params:s}));case 1:case"end":return a.stop()}},r)})),g.apply(this,arguments)}function C(r){return Z.apply(this,arguments)}function Z(){return Z=_asyncToGenerator(_regeneratorRuntime().mark(function r(s){var n;return _regeneratorRuntime().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,request(api+"it/project/index",{method:"GET",params:_objectSpread({},s)});case 2:return n=m.sent,m.abrupt("return",{data:n.data,success:n.success,total:n.data.total,pageSize:n.data.pageSize,current:n.data.current});case 4:case"end":return m.stop()}},r)})),Z.apply(this,arguments)}function Q(r){return E.apply(this,arguments)}function E(){return E=(0,v.Z)((0,l.Z)().mark(function r(s){return(0,l.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,j.WY)(o.h+"it/project/detail",{params:s}));case 1:case"end":return a.stop()}},r)})),E.apply(this,arguments)}function b(r){return d.apply(this,arguments)}function d(){return d=(0,v.Z)((0,l.Z)().mark(function r(s){return(0,l.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,j.WY)(o.h+"it/project/form",{method:"POST",data:s}));case 1:case"end":return a.stop()}},r)})),d.apply(this,arguments)}function T(r){return D.apply(this,arguments)}function D(){return D=(0,v.Z)((0,l.Z)().mark(function r(s){return(0,l.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,j.WY)(o.h+"it/project/finish",{params:s}));case 1:case"end":return a.stop()}},r)})),D.apply(this,arguments)}}}]);
