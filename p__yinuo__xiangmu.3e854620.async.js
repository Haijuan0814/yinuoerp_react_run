(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[816,3266,5534,1427,9170],{72758:function(W,O,e){"use strict";e.d(O,{gp:function(){return y},dM:function(){return B},R2:function(){return u}});var E=e(39428),j=e(11849),x=e(3182),d=e(2521),I=e(43237);function y(_,i){return h.apply(this,arguments)}function h(){return h=(0,x.Z)((0,E.Z)().mark(function _(i,c){var r;return(0,E.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,d.WY)(I.h+"crm/xiangmu/index",(0,j.Z)({method:"GET",params:(0,j.Z)({},i)},c||{}));case 2:return r=m.sent,m.abrupt("return",{data:r.data.data,success:r.success,total:r.data.total,pageSize:r.data.pageSize,current:r.data.current});case 4:case"end":return m.stop()}},_)})),h.apply(this,arguments)}function B(_){return f.apply(this,arguments)}function f(){return f=(0,x.Z)((0,E.Z)().mark(function _(i){return(0,E.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,d.WY)(I.h+"crm/xiangmu/detail",{params:i}));case 1:case"end":return r.stop()}},_)})),f.apply(this,arguments)}function u(_){return l.apply(this,arguments)}function l(){return l=(0,x.Z)((0,E.Z)().mark(function _(i){return(0,E.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,d.WY)(I.h+"crm/xiangmu/save",{method:"POST",data:i}));case 1:case"end":return r.stop()}},_)})),l.apply(this,arguments)}function A(_){return D.apply(this,arguments)}function D(){return D=_asyncToGenerator(_regeneratorRuntime().mark(function _(i){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request(api+"crm/xiangmu/delete",_objectSpread({method:"DELETE"},i||{})));case 1:case"end":return r.stop()}},_)})),D.apply(this,arguments)}},33753:function(W,O,e){"use strict";e.r(O);var E=e(13254),j=e(14277),x=e(12968),d=e(70080),I=e(66456),y=e(55499),h=e(39428),B=e(3182),f=e(58024),u=e(91894),l=e(57663),A=e(71577),D=e(2824),_=e(47673),i=e(4107),c=e(49101),r=e(67294),M=e(36653),m=e(72758),C=e(2521),T=e(75362),L=e(30381),R=e.n(L),t=e(85893),p=i.Z.Search,o=function(v){var U=v.location.query.keyword;console.log(U);var F=(0,r.useState)(U),K=(0,D.Z)(F,2),Y=K[0],G=K[1],$=(0,r.useState)({}),b=(0,D.Z)($,2),g=b[0],z=b[1],k=(0,C.QT)(m.dM,{manual:!0,onSuccess:function(n,s){z(n.row)}}),Z=k.run;(0,r.useEffect)(function(){Z({keyword:U})},[]);var H=function(){C.m8.push({pathname:"/yinuo/xiangmu_apply"})},N=function(n){G(n),Z({keyword:n})},S=[{title:"\u8BBE\u5907\u540D\u79F0",dataIndex:"name",key:"name"},{title:"\u8BBE\u5907\u7C7B\u578B",dataIndex:"type",key:"type"},{title:"\u4F9B\u5E94\u5546\u540D\u79F0",dataIndex:"supplier",key:"supplier"},{title:"\u4F9B\u5E94\u5546\u914D\u5408",dataIndex:"supplier_peihe",key:"supplier_peihe",render:function(n){return(0,t.jsxs)("span",{children:[n?"\u662F":"\u5426"," "]})}},{title:"\u4F9B\u5E94\u5546\u8054\u7CFB\u65B9\u5F0F",dataIndex:"supplier_mobile",key:"supplier_mobile"},{title:"\u6570\u91CF",dataIndex:"num",key:"num"},{title:"\u5907\u6CE8",dataIndex:"remark",key:"remark"}],Q=!!(g&&g.id);return(0,t.jsxs)(T.ZP,{title:"\u5B9E\u540D\u5236\u76D1\u7BA1\u5E73\u53F0\u4FE1\u606F\u63A5\u5165",style:{background:"#f5f5f5"},footer:!1,children:[(0,t.jsxs)(u.Z,{children:[(0,t.jsxs)(A.Z,{type:"primary",size:"large",onClick:function(){return H()},style:{float:"right"},value:Y,children:[(0,t.jsx)(c.Z,{})," \u6DFB\u52A0\u9879\u76EE"]}),(0,t.jsx)(p,{placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u4EBA\u624B\u673A\u53F7",enterButton:"\u641C\u7D22",size:"large",onSearch:function(n){return N(n)},style:{maxWidth:"500px"}})]}),(0,t.jsx)("br",{}),(0,t.jsx)(u.Z,{style:{minHeight:"460px"},children:Q?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(M.ZP,{column:3,request:(0,B.Z)((0,h.Z)().mark(function a(){return(0,h.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",{data:g});case 1:case"end":return s.stop()}},a)})),columns:[{title:"\u9879\u76EE\u540D\u79F0",dataIndex:"name"},{title:"\u9879\u76EE\u8BB8\u53EF\u8BC1\u53F7",dataIndex:"number"},{title:"\u9879\u76EE\u7C7B\u578B",dataIndex:"type"},{title:"\u5F00\u5DE5\u65E5\u671F",dataIndex:"start_date",render:function(n){return(0,t.jsxs)("span",{children:[n>0?R()(parseInt(n)*1e3).format("YYYY-MM-DD"):""," "]})}},{title:"\u7AE3\u5DE5\u65E5\u671F",dataIndex:"end_date",render:function(n){return(0,t.jsxs)("span",{children:[n>0?R()(parseInt(n)*1e3).format("YYYY-MM-DD"):""," "]})}},{title:"\u5360\u5730\u9762\u79EF",dataIndex:"area",render:function(n){return(0,t.jsxs)("span",{children:[n," \u4E07\u5E73\u65B9\u7C73 "]})}},{title:"\u5DE5\u7A0B\u9020\u4EF7",dataIndex:"price",render:function(n){return(0,t.jsxs)("span",{children:[n," \u4E07\u5143 "]})}},{title:"\u9879\u76EE\u5730\u5740",dataIndex:"county",render:function(n,s){return(0,t.jsxs)("span",{children:["\u6CB3\u5317\u7701 \u77F3\u5BB6\u5E84\u5E02 ",n," ",s.address]})}},{title:"\u5EFA\u8BBE\u5355\u4F4D",dataIndex:"jianshe_name",render:function(n,s){return(0,t.jsxs)("span",{children:[n?n+"(\u8054\u7CFB\u4EBA\uFF1A"+s.jianshe_user+" "+s.jianshe_mobile+")":"\u6682\u65E0"," "]})}},{title:"\u65BD\u5DE5\u5355\u4F4D",dataIndex:"shigong_name",render:function(n,s){return(0,t.jsxs)("span",{children:[n?n+"(\u8054\u7CFB\u4EBA\uFF1A"+s.shigong_user+" "+s.shigong_mobile+")":"\u6682\u65E0"," "]})}},{title:"\u76D1\u7406\u5355\u4F4D",dataIndex:"jianli_name",render:function(n,s){return(0,t.jsxs)("span",{children:[n?n+"(\u8054\u7CFB\u4EBA\uFF1A"+s.jianli_user+" "+s.jianli_mobile+")":"\u6682\u65E0"," "]})}},{title:"\u8BBE\u8BA1\u5355\u4F4D",dataIndex:"sheji_name",render:function(n,s){return(0,t.jsxs)("span",{children:[n?n+"(\u8054\u7CFB\u4EBA\uFF1A"+s.sheji_user+" "+s.sheji_mobile+")":"\u6682\u65E0"," "]})}},{title:"\u5907\u6CE8\u8BF4\u660E",dataIndex:"remark"},{title:"\u8054\u7CFB\u4EBA",dataIndex:"contact_user"},{title:"\u8054\u7CFB\u4EBA\u7535\u8BDD",dataIndex:"contact_mobile"}]}),(0,t.jsxs)("div",{children:["\xA0\xA0\xA0\xA0",(0,t.jsx)("strong",{children:"\u5DF2\u5B89\u88C5\u8BBE\u5907"})]}),(0,t.jsx)(y.Z,{dataSource:g.devices,columns:S}),(0,t.jsx)("br",{}),(0,t.jsxs)("div",{children:["\xA0\xA0\xA0\xA0",(0,t.jsx)("strong",{children:"\u9884\u5B89\u88C5\u8BBE\u5907"})]}),(0,t.jsx)(y.Z,{dataSource:g.will_devices,columns:S}),(0,t.jsx)("br",{}),(0,t.jsx)(u.Z,{style:{border:"1px solid #eee"},title:"\u73B0\u573A\u8BBE\u5907\u7167\u7247",children:g.device_photos_arr.map(function(a,n){return(0,t.jsx)(d.Z,{width:80,src:a,style:{border:"1px solid #eee",background:"#eeeeee"}},a)})})]}):(0,t.jsx)(j.Z,{content:"\u6682\u65E0\u6570\u636E"})})]})};O.default=o},86743:function(W,O,e){"use strict";var E=e(22122),j=e(28481),x=e(9475),d=e(67294),I=e(71577),y=e(73839);function h(f){return!!(f&&!!f.then)}var B=function(u){var l=d.useRef(!1),A=d.useRef(null),D=(0,x.Z)(!1),_=(0,j.Z)(D,2),i=_[0],c=_[1],r=u.close,M=function(){r==null||r.apply(void 0,arguments)};d.useEffect(function(){var p=null;return u.autoFocus&&(p=setTimeout(function(){var o;(o=A.current)===null||o===void 0||o.focus()})),function(){p&&clearTimeout(p)}},[]);var m=function(o){!h(o)||(c(!0),o.then(function(){c(!1,!0),M.apply(void 0,arguments),l.current=!1},function(P){console.error(P),c(!1,!0),l.current=!1}))},C=function(o){var P=u.actionFn;if(!l.current){if(l.current=!0,!P){M();return}var v;if(u.emitEvent){if(v=P(o),u.quitOnNullishReturnValue&&!h(v)){l.current=!1,M(o);return}}else if(P.length)v=P(r),l.current=!1;else if(v=P(),!v){M();return}m(v)}},T=u.type,L=u.children,R=u.prefixCls,t=u.buttonProps;return d.createElement(I.Z,(0,E.Z)({},(0,y.n)(T),{onClick:C,loading:i,prefixCls:R},t,{ref:A}),L)};O.Z=B}}]);
