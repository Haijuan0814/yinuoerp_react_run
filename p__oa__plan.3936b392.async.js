(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[7947],{90672:function(G,R,e){"use strict";var h=e(28991),p=e(81253),y=e(85893),P=e(67294),o=e(39863),C=["fieldProps","proFieldProps"],L=function(_,c){var m=_.fieldProps,u=_.proFieldProps,d=(0,p.Z)(_,C);return(0,y.jsx)(o.Z,(0,h.Z)({ref:c,valueType:"textarea",fieldProps:m,proFieldProps:u},d))};R.Z=P.forwardRef(L)},74025:function(G){G.exports={avatarHolder:"avatarHolder___oJeNk",name:"name___1RI-P",detail:"detail___1zGmD",tagsTitle:"tagsTitle___2j2o-",teamTitle:"teamTitle___2ugLT",tags:"tags___xSe4Y",team:"team___33bNk",tabsCard:"tabsCard___3W4EB","ant-picker-input":"ant-picker-input___UEZIG",leftContainer:"leftContainer___25RM9",rightContainer:"rightContainer___1ACtH",year:"year___AnGXN","ant-timeline":"ant-timeline___2zkGH","ant-timeline-alternate":"ant-timeline-alternate___2sJso","ant-timeline-item-right":"ant-timeline-item-right____Mg1F","ant-timeline-item-content":"ant-timeline-item-content___1tEGn","ant-timeline-item-head":"ant-timeline-item-head___jkoUE",content:"content___6Hwqp",plan:"plan___16hUy",report:"report___3Z_rZ"}},64139:function(){},57529:function(){},80877:function(G,R,e){"use strict";e.d(R,{Z:function(){return F}});var h=e(57663),p=e(71577),y=e(9715),P=e(55843),o=e(47673),C=e(4107),L=e(54421),j=e(38272),_=e(60663),c=e(31990),m=e(2824),u=e(67294),d=e(2521),b=e(30381),Z=e(39428),s=e(11849),r=e(3182),t=e(43237);function n(M,E){return a.apply(this,arguments)}function a(){return a=(0,r.Z)((0,Z.Z)().mark(function M(E,I){var l,T;return(0,Z.Z)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return l=t.h+"base/comment/index",x.next=3,(0,d.WY)(l,{method:"GET",params:(0,s.Z)({},E)});case 3:return T=x.sent,x.abrupt("return",{data:T.data,success:T.success});case 5:case"end":return x.stop()}},M)})),a.apply(this,arguments)}function U(M){return K.apply(this,arguments)}function K(){return K=(0,r.Z)((0,Z.Z)().mark(function M(E){var I;return(0,Z.Z)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return I=t.h+"base/comment/save",T.abrupt("return",(0,d.WY)(I,{method:"POST",data:E}));case 2:case"end":return T.stop()}},M)})),K.apply(this,arguments)}function i(M){return f.apply(this,arguments)}function f(){return f=_asyncToGenerator(_regeneratorRuntime().mark(function M(E){var I;return _regeneratorRuntime().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return I=api+"it/"+E.tablename+"/form",T.abrupt("return",request(I,{method:"POST",data:E}));case 2:case"end":return T.stop()}},M)})),f.apply(this,arguments)}function W(M){return g.apply(this,arguments)}function g(){return g=_asyncToGenerator(_regeneratorRuntime().mark(function M(E){return _regeneratorRuntime().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",request(api+"it/think/form",_objectSpread({method:"DELETE"},E||{})));case 1:case"end":return l.stop()}},M)})),g.apply(this,arguments)}var O=e(85893),B=function(E){var I=E.tablename,l=E.tableid,T=E.isEdit,z=E.isShowContent,x=(0,u.useState)([]),ee=(0,m.Z)(x,2),V=ee[0],J=ee[1],te=(0,d.QT)(n,{manual:!0,onSuccess:function(A,re){var ie=A.rows,k=[];ie.map(function(Q){Q.tableid==l&&k.push(Q)}),J(k)}}),ne=te.run;(0,u.useEffect)(function(){ne({tablename:I,tableid:l})},[]);var ae=(0,u.useState)(!1),X=(0,m.Z)(ae,2),N=X[0],S=X[1],w=(0,u.useState)(""),H=(0,m.Z)(w,2),ue=H[0],se=H[1],ce=(0,d.QT)(function($){return U($)},{manual:!0,onSuccess:function(A){S(!1),se(""),ne({tablename:I,tableid:l})}}),le=ce.run,_e=function(A){se(A.target.value)},oe=function(){S(!0);var A={content:ue,tablename:I,tableid:l,parent:0};le(A)},Y=function(A){if(A.indexOf("http")!=-1){var re=/(https?|http|ftp|file):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/g,ie=A.replace(re,function(Q){return'<a href="'+Q+'" target=_blank>'+Q+"</a>"}),k={__html:ie.replaceAll(`
`,"<br />")};return(0,O.jsx)("div",{dangerouslySetInnerHTML:k})}else return(0,O.jsx)("div",{dangerouslySetInnerHTML:{__html:A.replaceAll(`
`,"<br />")}})};return(0,O.jsxs)("div",{children:[V.length>0?(0,O.jsx)(j.ZP,{className:"comment-list",itemLayout:"horizontal",dataSource:V,renderItem:function(A){return(0,O.jsx)("li",{children:(0,O.jsx)(c.Z,{actions:A.actions,author:A.user.name,avatar:A.user.avatar,content:Y(A.content),datetime:A.insert_time})})}}):"",T?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(P.Z.Item,{children:(0,O.jsx)(C.Z.TextArea,{rows:2,onChange:function(A){return _e(A)},value:ue,className:"comment_textarea___hnYGe",style:{height:"70px"}})}),(0,O.jsx)(P.Z.Item,{children:(0,O.jsx)(p.Z,{htmlType:"submit",loading:N,onClick:function(){return oe()},type:"primary",children:"\u53D1\u8868\u8BC4\u8BBA"})})]}):""]})},F=B},79554:function(G,R,e){"use strict";var h=e(39428),p=e(3182),y=e(37476),P=e(90672),o=e(85893),C=function(j){var _=j.visible,c=j.current,m=j.onDone,u=j.onSubmit,d=j.children;return _?(0,o.jsx)(y.Y,{visible:_,title:"\u5199\u65E5\u62A5",className:"plan",width:640,onFinish:function(){var b=(0,p.Z)((0,h.Z)().mark(function Z(s){return(0,h.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:u(s);case 1:case"end":return t.stop()}},Z)}));return function(Z){return b.apply(this,arguments)}}(),initialValues:c,submitter:{render:function(Z,s){return s}},trigger:(0,o.jsx)(o.Fragment,{children:d}),modalProps:{onCancel:function(){return m()},destroyOnClose:!0},children:(0,o.jsx)(P.Z,{id:"planTextArea",className:"planTextarea",name:"content",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5DE5\u4F5C\u5185\u5BB9\u548C\u603B\u7ED3"}],placeholder:"\u8BF7\u8F93\u5165\u5DE5\u4F5C\u5185\u5BB9\u548C\u603B\u7ED3\uFF0C\u5982\u679C\u6709\u95EE\u9898\u3001\u6536\u83B7\u3001\u5EFA\u8BAE\u4E5F\u53EF\u5199\u5728\u6B64\u5904\u54E6\uFF5E"})}):null};R.Z=C},65212:function(G,R,e){"use strict";e.r(R);var h=e(58024),p=e(91894),y=e(87593),P=e(37636),o=e(94233),C=e(51890),L=e(88983),j=e(55742),_=e(2824),c=e(67724),m=e(8812),u=e(67294),d=e(75362),b=e(21349),Z=e(74025),s=e.n(Z),r=e(30381),t=e.n(r),n=e(79554),a=e(67547),U=e(2521),K=e(80877),i=e(85893),f=function(){var g=(0,U.tT)("@@initialState"),O=g.initialState,B=g.setInitialState,F=O.currentUser,M=(0,u.useState)([]),E=(0,_.Z)(M,2),I=E[0],l=E[1],T=(0,u.useState)([]),z=(0,_.Z)(T,2),x=z[0],ee=z[1],V=(0,u.useState)([]),J=(0,_.Z)(V,2),te=J[0],ne=J[1],ae=(0,u.useState)(!0),X=(0,_.Z)(ae,2),N=X[0],S=X[1],w=(0,U.QT)(a.gp,{manual:!0,onSuccess:function(D,q){l(D.list),ee(D.monday),ne(D.sunday),S(!1)}}),H=w.run;(0,u.useEffect)(function(){H()},[]);var ue=(0,u.useState)(!1),se=(0,_.Z)(ue,2),ce=se[0],le=se[1],_e=(0,u.useState)(void 0),oe=(0,_.Z)(_e,2),Y=oe[0],$=oe[1],A=function(D){D==-1?H({time:x-86400*7}):D==1&&H({time:Number(x)+Number(86400*7)})},re=function(D){D?U.m8.push({pathname:"/oa/plan/".concat(D)}):U.m8.push({pathname:"/oa/plan"})},ie=(0,U.QT)(function(v,D){if(v==="remove")return(0,a.v$)(D);var q={content:D.content,time:Y==null?void 0:Y.time,cycle:Y==null?void 0:Y.cycle,id:Y==null?void 0:Y.id};return(0,a.oc)(q)},{manual:!0,onSuccess:function(D){H({time:x})}}),k=ie.run,Q=function(D,q){D==="save"?me(q):D==="delete"&&Modal.confirm({title:"\u5220\u9664\u5DE5\u4F5C\u65E5\u62A5",content:"\u786E\u5B9A\u5220\u9664\u8BE5\u8BB0\u5F55\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){return de(q.id)}})},me=function(D){le(!0),$(D)},de=function(D){k("remove",{id:D})},ve=function(){le(!1),$({})},fe=function(D){le(!1);var q=D!=null&&D.id?"update":"add";k(q,Object.assign(D,{summary:""}))};return(0,i.jsxs)(d.ZP,{children:[(0,i.jsxs)(j.ZP.Group,{defaultValue:"\u5DE5\u4F5C\u65E5\u62A5",buttonStyle:"solid",children:[(0,i.jsx)(j.ZP.Button,{value:"\u5DE5\u4F5C\u65E5\u62A5",onClick:function(){return re()},children:"\u5DE5\u4F5C\u65E5\u62A5"}),(0,i.jsx)(j.ZP.Button,{value:"\u8BA1\u5212\u62A5\u544A",onClick:function(){return re("report")},children:"\u8BA1\u5212\u62A5\u544A"})]}),(0,i.jsxs)(b.Z,{children:[(0,i.jsx)("br",{}),(0,i.jsx)(p.Z,{title:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("a",{style:{paddingRight:"24px",fontSize:"14px"},onClick:function(){return A(-1)},children:[(0,i.jsx)(c.Z,{}),"\u4E0A\u4E00\u5468"]}),(0,i.jsxs)("span",{children:[t()(parseInt(x)*1e3).format("YYYY/MM/DD"),"~",t()(parseInt(te)*1e3).format("YYYY/MM/DD")]}),(0,i.jsxs)("a",{style:{paddingLeft:"24px",fontSize:"14px"},onClick:function(){return A(1)},children:["\u4E0B\u4E00\u5468",(0,i.jsx)(m.Z,{})]})]}),className:s().tabsCard,bordered:!1,extra:F&&F.job_id==12?"":(0,i.jsx)("a",{onClick:function(){return re("others")},children:"\u67E5\u770B\u4F19\u4F34\u7684\u65E5\u62A5"}),children:(0,i.jsx)(P.Z,{children:I.map(function(v){return(0,i.jsx)(P.Z.Item,{dot:(0,i.jsx)(C.C,{style:{backgroundColor:v.active?"#e27f19":"#a6d1e9"},size:"large",children:v.week}),children:v.plan?(0,i.jsxs)("div",{style:{marginLeft:"20px",minHeight:"100px"},children:[(0,i.jsx)("div",{style:{padding:"12px",border:"2px solid",lineHeight:"28px",borderColor:v.active?"#e27f19":"#a6d1e9"},dangerouslySetInnerHTML:{__html:v&&v.plan.content?v.plan.content.replaceAll(`
`,"<br />"):"\u6682\u65E0\u5185\u5BB9"}}),(0,i.jsxs)("p",{style:{color:"#00000040",marginTop:"5px"},children:["\u66F4\u65B0\u4E8E ",v.plan.update_time>0?t()(parseInt(v.plan.update_time)*1e3).format("YYYY-MM-DD HH:mm"):"","\xA0\xA0",v.is_edit?(0,i.jsx)("a",{onClick:function(){return Q("save",v.plan)},children:"\u70B9\u51FB\u91CD\u65B0\u5199\u65E5\u62A5"}):""]}),(0,i.jsx)(K.Z,{tablename:"oa_plan",tableid:v.plan.id,isEdit:!1})]}):(0,i.jsxs)("div",{style:{marginLeft:"20px",height:"100px"},children:[(0,i.jsx)("p",{style:{color:"#00000040"},children:"\u8FD8\u6CA1\u6709\u5236\u5B9A\u4EFB\u4F55\u8BA1\u5212"}),v.is_edit?(0,i.jsx)("a",{onClick:function(){return Q("save",{time:v.time,cycle:"day"})},children:"\u70B9\u51FB\u5199\u65E5\u62A5"}):""]})},v.time)})})})]}),(0,i.jsx)(n.Z,{visible:ce,current:Y,cycle:"day",onDone:ve,onSubmit:fe})]})};R.default=f},67547:function(G,R,e){"use strict";e.d(R,{gp:function(){return C},v$:function(){return j},oc:function(){return c},KS:function(){return u},QL:function(){return b}});var h=e(39428),p=e(11849),y=e(3182),P=e(2521),o=e(43237);function C(s){return L.apply(this,arguments)}function L(){return L=(0,y.Z)((0,h.Z)().mark(function s(r){var t;return(0,h.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,P.WY)(o.h+"oa/plan/index",{method:"GET",params:(0,p.Z)({},r)});case 2:return t=a.sent,a.abrupt("return",{data:t.data,success:t.success});case 4:case"end":return a.stop()}},s)})),L.apply(this,arguments)}function j(s){return _.apply(this,arguments)}function _(){return _=(0,y.Z)((0,h.Z)().mark(function s(r){return(0,h.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,P.WY)(o.h+"oa/plan/delete",{method:"DELETE",data:r}));case 1:case"end":return n.stop()}},s)})),_.apply(this,arguments)}function c(s){return m.apply(this,arguments)}function m(){return m=(0,y.Z)((0,h.Z)().mark(function s(r){return(0,h.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,P.WY)(o.h+"oa/plan/save",{method:"POST",data:r}));case 1:case"end":return n.stop()}},s)})),m.apply(this,arguments)}function u(s){return d.apply(this,arguments)}function d(){return d=(0,y.Z)((0,h.Z)().mark(function s(r){var t;return(0,h.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,P.WY)(o.h+"oa/plan/weekline",{method:"GET",params:(0,p.Z)({},r)});case 2:return t=a.sent,a.abrupt("return",{data:t.data,success:t.success});case 4:case"end":return a.stop()}},s)})),d.apply(this,arguments)}function b(s){return Z.apply(this,arguments)}function Z(){return Z=(0,y.Z)((0,h.Z)().mark(function s(r){var t;return(0,h.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,P.WY)(o.h+"oa/plan/report",{method:"GET",params:(0,p.Z)({},r)});case 2:return t=a.sent,a.abrupt("return",{data:t.data,success:t.success});case 4:case"end":return a.stop()}},s)})),Z.apply(this,arguments)}},86743:function(G,R,e){"use strict";var h=e(22122),p=e(28481),y=e(9475),P=e(67294),o=e(71577),C=e(73839);function L(_){return!!(_&&!!_.then)}var j=function(c){var m=P.useRef(!1),u=P.useRef(null),d=(0,y.Z)(!1),b=(0,p.Z)(d,2),Z=b[0],s=b[1],r=c.close,t=function(){r==null||r.apply(void 0,arguments)};P.useEffect(function(){var W=null;return c.autoFocus&&(W=setTimeout(function(){var g;(g=u.current)===null||g===void 0||g.focus()})),function(){W&&clearTimeout(W)}},[]);var n=function(g){!L(g)||(s(!0),g.then(function(){s(!1,!0),t.apply(void 0,arguments),m.current=!1},function(O){console.error(O),s(!1,!0),m.current=!1}))},a=function(g){var O=c.actionFn;if(!m.current){if(m.current=!0,!O){t();return}var B;if(c.emitEvent){if(B=O(g),c.quitOnNullishReturnValue&&!L(B)){m.current=!1,t(g);return}}else if(O.length)B=O(r),m.current=!1;else if(B=O(),!B){t();return}n(B)}},U=c.type,K=c.children,i=c.prefixCls,f=c.buttonProps;return P.createElement(o.Z,(0,h.Z)({},(0,C.n)(U),{onClick:a,loading:Z,prefixCls:i},f,{ref:u}),K)};R.Z=j},31990:function(G,R,e){"use strict";var h=e(22122),p=e(96156),y=e(94184),P=e.n(y),o=e(67294),C=e(53124),L=function(_,c){var m={};for(var u in _)Object.prototype.hasOwnProperty.call(_,u)&&c.indexOf(u)<0&&(m[u]=_[u]);if(_!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(_);d<u.length;d++)c.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(_,u[d])&&(m[u[d]]=_[u[d]]);return m},j=function(c){var m=c.actions,u=c.author,d=c.avatar,b=c.children,Z=c.className,s=c.content,r=c.prefixCls,t=c.datetime,n=L(c,["actions","author","avatar","children","className","content","prefixCls","datetime"]),a=o.useContext(C.E_),U=a.getPrefixCls,K=a.direction,i=function(E,I){return o.createElement("div",{className:P()("".concat(E,"-nested"))},I)},f=U("comment",r),W=d?o.createElement("div",{className:"".concat(f,"-avatar")},typeof d=="string"?o.createElement("img",{src:d,alt:"comment-avatar"}):d):null,g=m&&m.length?o.createElement("ul",{className:"".concat(f,"-actions")},m.map(function(M,E){return o.createElement("li",{key:"action-".concat(E)},M)})):null,O=(u||t)&&o.createElement("div",{className:"".concat(f,"-content-author")},u&&o.createElement("span",{className:"".concat(f,"-content-author-name")},u),t&&o.createElement("span",{className:"".concat(f,"-content-author-time")},t)),B=o.createElement("div",{className:"".concat(f,"-content")},O,o.createElement("div",{className:"".concat(f,"-content-detail")},s),g),F=P()(f,(0,p.Z)({},"".concat(f,"-rtl"),K==="rtl"),Z);return o.createElement("div",(0,h.Z)({},n,{className:F}),o.createElement("div",{className:"".concat(f,"-inner")},W,B),b?i(f,b):null)};R.Z=j},60663:function(G,R,e){"use strict";var h=e(38663),p=e.n(h),y=e(64139),P=e.n(y)},37636:function(G,R,e){"use strict";e.d(R,{Z:function(){return Z}});var h=e(22122),p=e(96156),y=e(7085),P=e(94184),o=e.n(P),C=e(67294),L=e(53124),j=e(96159),_=function(s,r){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&r.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(s);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(s,n[a])&&(t[n[a]]=s[n[a]]);return t},c=function(r){var t,n,a=r.prefixCls,U=r.className,K=r.color,i=K===void 0?"blue":K,f=r.dot,W=r.pending,g=W===void 0?!1:W,O=r.position,B=r.label,F=r.children,M=_(r,["prefixCls","className","color","dot","pending","position","label","children"]),E=C.useContext(L.E_),I=E.getPrefixCls,l=I("timeline",a),T=o()((t={},(0,p.Z)(t,"".concat(l,"-item"),!0),(0,p.Z)(t,"".concat(l,"-item-pending"),g),t),U),z=o()((n={},(0,p.Z)(n,"".concat(l,"-item-head"),!0),(0,p.Z)(n,"".concat(l,"-item-head-custom"),!!f),(0,p.Z)(n,"".concat(l,"-item-head-").concat(i),!0),n)),x=/blue|red|green|gray/.test(i||"")?void 0:i;return C.createElement("li",(0,h.Z)({},M,{className:T}),B&&C.createElement("div",{className:"".concat(l,"-item-label")},B),C.createElement("div",{className:"".concat(l,"-item-tail")}),C.createElement("div",{className:z,style:{borderColor:x,color:x}},f),C.createElement("div",{className:"".concat(l,"-item-content")},F))},m=c,u=function(s,r){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&r.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(s);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(s,n[a])&&(t[n[a]]=s[n[a]]);return t},d=function(r){var t,n=C.useContext(L.E_),a=n.getPrefixCls,U=n.direction,K=r.prefixCls,i=r.pending,f=i===void 0?null:i,W=r.pendingDot,g=r.children,O=r.className,B=r.reverse,F=B===void 0?!1:B,M=r.mode,E=M===void 0?"":M,I=u(r,["prefixCls","pending","pendingDot","children","className","reverse","mode"]),l=a("timeline",K),T=typeof f=="boolean"?null:f,z=f?C.createElement(m,{pending:!!f,dot:W||C.createElement(y.Z,null)},T):null,x=C.Children.toArray(g);x.push(z),F&&x.reverse();var ee=function(S,w){return E==="alternate"?S.props.position==="right"?"".concat(l,"-item-right"):S.props.position==="left"||w%2==0?"".concat(l,"-item-left"):"".concat(l,"-item-right"):E==="left"?"".concat(l,"-item-left"):E==="right"||S.props.position==="right"?"".concat(l,"-item-right"):""},V=x.filter(function(N){return!!N}),J=C.Children.count(V),te="".concat(l,"-item-last"),ne=C.Children.map(V,function(N,S){var w=S===J-2?te:"",H=S===J-1?te:"";return(0,j.Tm)(N,{className:o()([N.props.className,!F&&!!f?w:H,ee(N,S)])})}),ae=x.some(function(N){var S;return!!((S=N==null?void 0:N.props)===null||S===void 0?void 0:S.label)}),X=o()(l,(t={},(0,p.Z)(t,"".concat(l,"-pending"),!!f),(0,p.Z)(t,"".concat(l,"-reverse"),!!F),(0,p.Z)(t,"".concat(l,"-").concat(E),!!E&&!ae),(0,p.Z)(t,"".concat(l,"-label"),ae),(0,p.Z)(t,"".concat(l,"-rtl"),U==="rtl"),t),O);return C.createElement("ul",(0,h.Z)({},I,{className:X}),ne)};d.Item=m;var b=d,Z=b},87593:function(G,R,e){"use strict";var h=e(38663),p=e.n(h),y=e(57529),P=e.n(y)}}]);
