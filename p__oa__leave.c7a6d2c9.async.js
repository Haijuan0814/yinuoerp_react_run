(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[1950],{6991:function(K){K.exports={"ant-pro-form-group-container":"ant-pro-form-group-container___XosEC",standardList:"standardList___10LZx",headerInfo:"headerInfo___32FN3",listContent:"listContent___3KYa-",listContentItem:"listContentItem___3FsNv",extraContentSearch:"extraContentSearch___1vaxz",listCard:"listCard___20G7s",standardListForm:"standardListForm___1ewNC",formResult:"formResult___1T-dy"}},60255:function(K,D,e){"use strict";var o=e(57106),L=e(99683),v=e(57663),c=e(71577),f=e(17462),g=e(76772),P=e(39428),R=e(3182),C=e(37476),j=e(64317),m=e(952),F=e(45510),M=e(33725),p=e(31199),x=e(90672),u=e(6991),r=e.n(u),a=e(85893),s="HH:mm",E=function(i){var A=i.done,Z=i.visible,b=i.current,h=i.onDone,G=i.onSubmit,z=i.children;return Z?(0,a.jsx)(C.Y,{visible:Z,title:A?null:"\u8BF7\u5047\u767B\u8BB0",className:r().standardListForm,width:640,onFinish:function(){var I=(0,R.Z)((0,P.Z)().mark(function B(T){return(0,P.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:T.type="qingjia",G(T);case 2:case"end":return n.stop()}},B)}));return function(B){return I.apply(this,arguments)}}(),initialValues:b||{unit:"\u5929"},submitter:{render:function(B,T){return A?null:T}},trigger:(0,a.jsx)(a.Fragment,{children:z}),modalProps:{onCancel:function(){return h()},destroyOnClose:!0,bodyStyle:A?{padding:"72px 0"}:{}},children:A?(0,a.jsx)(L.ZP,{status:"success",title:"\u7533\u8BF7\u63D0\u4EA4\u6210\u529F",subTitle:"\u7B49\u5F85\u5BA1\u6838\u901A\u8FC7\u540E\uFF0C\u8BF7\u5047\u5373\u751F\u6548",extra:(0,a.jsx)(c.Z,{type:"primary",onClick:h,children:"\u77E5\u9053\u4E86"}),className:r().formResult}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.Z,{message:"\u63D0\u793A\uFF1A\u8BF7\u5148\u4E0E\u76F4\u5C5E\u8D1F\u8D23\u4EBA\u7EBF\u4E0B\u786E\u5B9A\u8BF7\u5047\u540E\u518D\u7CFB\u7EDF\u63D0\u4EA4\u7533\u8BF7\uFF0C\u8BF7\u5047\u9700\u63D0\u524D\u7533\u8BF7",type:"warning"}),(0,a.jsx)("br",{}),(0,a.jsx)(j.Z,{name:"thing",label:"\u8BF7\u5047\u7C7B\u578B",width:"sm",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u8BF7\u5047\u7C7B\u578B"}],options:[{value:"shijia",label:"\u4E8B\u5047"},{value:"bingjia",label:"\u75C5\u5047"},{value:"chuchai",label:"\u51FA\u5DEE"},{value:"yingongwaichu",label:"\u56E0\u516C\u5916\u51FA"},{value:"xuexi",label:"\u5916\u51FA\u5B66\u4E60"},{value:"nianjia",label:"\u5E74\u5047"},{value:"jiaban",label:"\u52A0\u73ED"},{value:"tiaoxiu_jiaban",label:"\u8865\u73ED"},{value:"tiaoxiu",label:"\u8C03\u4F11"},{value:"hunjia",label:"\u5A5A\u5047"},{value:"chanjia",label:"\u4EA7\u5047"},{value:"chanjianjia",label:"\u4EA7\u68C0\u5047"},{value:"peichanjia",label:"\u966A\u4EA7\u5047"},{value:"sangjia",label:"\u4E27\u5047"},{value:"qita",label:"\u7279\u6B8A\u60C5\u51B5"}],placeholder:"\u8BF7\u9009\u62E9\u8BF7\u5047\u7C7B\u578B"}),(0,a.jsx)("div",{class:"ant-col ant-form-item-label",children:(0,a.jsx)("label",{for:"start_date",class:"ant-form-item-required",title:"\u5F00\u59CB\u65F6\u95F4",children:"\u5F00\u59CB\u65F6\u95F4"})}),(0,a.jsxs)(m.ZP.Group,{style:{marginBottom:"-20px"},children:[(0,a.jsx)(F.Z,{name:"start_date",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5F00\u59CB\u65E5\u671F"}],placeholder:"\u5F00\u59CB\u65E5\u671F",style:{marginBottom:"0px"}}),(0,a.jsx)(M.Z,{name:"start_time",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5F00\u59CB\u65F6\u95F4"}],placeholder:"\u5F00\u59CB\u65F6\u95F4",style:{marginBottom:"0px"},format:s})]}),(0,a.jsx)("div",{class:"ant-col ant-form-item-label",children:(0,a.jsx)("label",{for:"end_date",class:"ant-form-item-required",title:"\u5F00\u59CB\u65F6\u95F4",children:"\u7ED3\u675F\u65F6\u95F4"})}),(0,a.jsxs)(m.ZP.Group,{style:{marginBottom:"-20px"},children:[(0,a.jsx)(F.Z,{name:"end_date",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7ED3\u675F\u65E5\u671F"}],placeholder:"\u7ED3\u675F\u65E5\u671F",style:{marginBottom:"0px"}}),(0,a.jsx)(M.Z,{name:"end_time",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7ED3\u675F\u65F6\u95F4"}],placeholder:"\u7ED3\u675F\u65F6\u95F4",style:{marginBottom:"0px"},format:s})]}),(0,a.jsx)("div",{class:"ant-col ant-form-item-label",children:(0,a.jsx)("label",{for:"length",class:"ant-form-item-required",title:"\u5F00\u59CB\u65F6\u95F4",children:"\u8BF7\u5047\u65F6\u957F"})}),(0,a.jsxs)(m.ZP.Group,{style:{marginBottom:"-20px"},children:[(0,a.jsx)(p.Z,{name:"length",style:{marginBottom:"0px"}}),(0,a.jsx)(j.Z,{name:"unit",style:{marginBottom:"0px"},rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u8BF7\u5047\u65F6\u957F\u5355\u4F4D"}],options:[{value:"\u5929",label:"\u5929"},{value:"\u5C0F\u65F6",label:"\u5C0F\u65F6"}]})]}),(0,a.jsx)(x.Z,{name:"reason",label:"\u8BF7\u52A0\u539F\u56E0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BF7\u5047\u539F\u56E0",min:5}],placeholder:"\u8BF4\u660E\u8BF7\u5047\u539F\u56E0\uFF0C\u4E0D\u5F97\u5C11\u4E8E5\u4E2A\u5B57"})]})}):null};D.Z=E},2744:function(K,D,e){"use strict";e.r(D),e.d(D,{BasicList:function(){return H}});var o=e(54421),L=e(38272),v=e(54029),c=e(79166),f=e(58024),g=e(91894),P=e(94233),R=e(51890),C=e(57663),j=e(71577),m=e(59250),F=e(13013),M=e(30887),p=e(28682),x=e(71194),u=e(50146),r=e(2824),a=e(47673),s=e(4107),E=e(88983),Y=e(55742),i=e(67294),A=e(57254),Z=e(49101),b=e(75362),h=e(2521),G=e(30381),z=e.n(G),I=e(60255),B=e(57882),T=e(6991),S=e.n(T),n=e(85893),N=Y.ZP.Button,oe=Y.ZP.Group,de=s.Z.Search,O=10,ce=function(_){if(_=="success")return"\u5DF2\u751F\u6548";if(_=="check")return"\u5F85\u5BA1\u6279";if(_=="hr_check")return"\u884C\u653F\u5BA1\u6279";if(_=="dep_check")return"\u90E8\u95E8\u5BA1\u6279";if(_=="recheck")return"\u5F85\u590D\u5BA1";if(_=="fail")return"\u5DF2\u9A73\u56DE";if(_=="delete")return"\u5DF2\u4F5C\u5E9F"},Ee=function(_){if(_=="success")return"green";if(_=="check"||_=="hr_check"||_=="dep_check"||_=="recheck")return"volcano";if(_=="fail")return"black";if(_=="delete")return"gray"},H=function(){var _=(0,h.tT)("@@initialState"),me=_.initialState,He=_.setInitialState,he=me.currentUser,De=(0,i.useState)(!1),V=(0,r.Z)(De,2),J=V[0],X=V[1],ve=(0,i.useState)(!1),w=(0,r.Z)(ve,2),fe=w[0],k=w[1],Pe=(0,i.useState)(void 0),q=(0,r.Z)(Pe,2),Me=q[0],ee=q[1],Be=(0,i.useState)(""),te=(0,r.Z)(Be,2),$=te[0],ne=te[1],Oe=(0,i.useState)(1),ae=(0,r.Z)(Oe,2),U=ae[0],W=ae[1],ge=(0,i.useState)([]),se=(0,r.Z)(ge,2),Ce=se[0],je=se[1],Fe=(0,i.useState)([]),re=(0,r.Z)(Fe,2),pe=re[0],xe=re[1],Ae=(0,i.useState)(!0),ue=(0,r.Z)(Ae,2),Te=ue[0],ye=ue[1],Le=(0,h.QT)(B.gp,{manual:!0,onSuccess:function(t,d){je(t.list),xe(t.total),W(1),ye(!1)}}),y=Le.run;(0,i.useEffect)(function(){y({current:U,pageSize:O})},[]);var Re=function(t){t&&h.m8.push({pathname:"/oa/leave/detail/".concat(t.id)})},Ie=(0,h.QT)(function(l,t){if(l==="remove")return(0,B.v$)(t);var d=t._date;return(0,B.M7)(t)},{manual:!0,onSuccess:function(t){y({current:U,pageSize:O})}}),_e=Ie.run,Se=function(t){var d=t.target.value;W(1),y({keywords:$,tab:d,current:U,pageSize:O})},Ue=function(t){W(1),ne(t),y({keywords:t,current:U,pageSize:O})},We=function(t){W(t),y({keywords:$,current:t,pageSize:O})},le=function(t){k(!0),ee(t)},Ke=function(t){_e("remove",{id:t})},ie=function(t,d){t==="add"?le():t==="edit"?le(d):t==="delete"&&u.Z.confirm({title:"\u5220\u9664\u8BF7\u5047",content:"\u786E\u5B9A\u5220\u9664\u8BE5\u8BF7\u5047\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){return Ke(d.id)}})},Ze=(0,n.jsxs)("div",{className:S().extraContent,children:[(0,n.jsxs)(oe,{defaultValue:"all",onChange:function(t){return Se(t)},children:[(0,n.jsx)(N,{value:"all",children:"\u5168\u90E8"},"all"),(0,n.jsx)(N,{value:"approval",children:"\u5F85\u5BA1\u6279"},"approval"),(0,n.jsx)(N,{value:"success",children:"\u5DF2\u751F\u6548"},"success")]}),(0,n.jsx)(de,{className:S().extraContentSearch,placeholder:"\u8BF7\u8F93\u5165\u5458\u5DE5\u59D3\u540D",onSearch:function(t){return Ue(t)}})]}),be=function(t){var d=t.item;return(0,n.jsx)(F.Z,{overlay:(0,n.jsx)(p.Z,{onClick:function(Ne){var $e=Ne.key;return ie($e,d)},children:(0,n.jsx)(p.Z.Item,{children:"\u5220\u9664"},"delete")}),children:(0,n.jsxs)("a",{children:["\u66F4\u591A ",(0,n.jsx)(A.Z,{})]})})},ze=function(){X(!1),k(!1),ee({}),J&&(ne(""),W(1),y({keywords:$,current:U,pageSize:O}))},Ye=function(t){console.log(t),X(!0);var d=t!=null&&t.id?"update":"add";_e(d,t)};return(0,n.jsxs)("div",{children:[(0,n.jsx)(b.ZP,{extra:(0,n.jsxs)(j.Z,{type:"primary",onClick:function(){return ie("add")},children:[(0,n.jsx)(Z.Z,{})," ",(0,n.jsx)(h._H,{id:"pages.new",defaultMessage:"New"})]},"primary"),children:(0,n.jsx)("div",{className:S().standardList,children:(0,n.jsx)(g.Z,{className:S().listCard,bordered:!1,style:{marginTop:24},bodyStyle:{padding:"0 32px 40px 32px"},extra:Ze,children:(0,n.jsx)(L.ZP,{size:"large",rowKey:"id",loading:Te,pagination:{onChange:function(t){We(t)},showSizeChanger:!0,showQuickJumper:!0,pageSize:O,total:pe},dataSource:Ce,renderItem:function(t){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.Z.Ribbon,{text:ce(t.status),color:Ee(t.status),children:(0,n.jsx)(g.Z,{title:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(R.C,{src:t.insert_avatar,shape:"round"})," ",(0,n.jsxs)("a",{onClick:function(){Re(t)},children:[t.department_name," ",t.insert_user]})]}),size:"small",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{children:["\u8BF7\u5047\u7C7B\u578B\uFF1A",t.thing_str]}),(0,n.jsxs)("p",{children:["\u7533\u8BF7\u8BF4\u660E\uFF1A",t.reason]}),(0,n.jsxs)("p",{children:["\u8BF7\u5047\u65F6\u95F4\uFF1A",z()(t.start_time*1e3).format("YYYY-MM-DD HH:mm")," ",t.end_time>0?(0,n.jsxs)(n.Fragment,{children:["\u81F3 ",z()(t.end_time*1e3).format("MM-DD HH:mm")]}):""]}),(0,n.jsx)("p",{children:t.length>0?(0,n.jsxs)(n.Fragment,{children:["\u8BF7\u5047\u65F6\u957F\uFF1A",t.length,t.unit]}):""}),(0,n.jsxs)("span",{style:{color:"#bfbfbf",fontSize:"10px"},children:[t.insert_time_str,"\u7684\u7533\u8BF7"]}),"\xA0\xA0",he.id==t.insert_uid&&t.status=="check"?(0,n.jsx)(be,{item:t},"more"):""]})})}),(0,n.jsx)("br",{})]})}})})})}),(0,n.jsx)(I.Z,{done:J,visible:fe,current:Me,onDone:ze,onSubmit:Ye})]})};D.default=H},57882:function(K,D,e){"use strict";e.d(D,{gp:function(){return g},v$:function(){return R},M7:function(){return j},eB:function(){return F},dM:function(){return p}});var o=e(39428),L=e(11849),v=e(3182),c=e(2521),f=e(43237);function g(u){return P.apply(this,arguments)}function P(){return P=(0,v.Z)((0,o.Z)().mark(function u(r){var a;return(0,o.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,(0,c.WY)(f.h+"oa/leave/index",{method:"GET",params:(0,L.Z)({},r)});case 2:return a=E.sent,E.abrupt("return",{data:a.data,success:a.success,total:a.data.total,pageSize:a.data.pageSize,current:a.data.current});case 4:case"end":return E.stop()}},u)})),P.apply(this,arguments)}function R(u){return C.apply(this,arguments)}function C(){return C=(0,v.Z)((0,o.Z)().mark(function u(r){return(0,o.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,c.WY)(f.h+"oa/leave/delete",{params:r}));case 1:case"end":return s.stop()}},u)})),C.apply(this,arguments)}function j(u){return m.apply(this,arguments)}function m(){return m=(0,v.Z)((0,o.Z)().mark(function u(r){return(0,o.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,c.WY)(f.h+"oa/leave/save",{method:"POST",data:r}));case 1:case"end":return s.stop()}},u)})),m.apply(this,arguments)}function F(u){return M.apply(this,arguments)}function M(){return M=(0,v.Z)((0,o.Z)().mark(function u(r){return(0,o.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,c.WY)(f.h+"oa/leave/saveBuka",{method:"POST",data:r}));case 1:case"end":return s.stop()}},u)})),M.apply(this,arguments)}function p(u){return x.apply(this,arguments)}function x(){return x=(0,v.Z)((0,o.Z)().mark(function u(r){return(0,o.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,c.WY)(f.h+"oa/leave/detail",{params:r}));case 1:case"end":return s.stop()}},u)})),x.apply(this,arguments)}}}]);
