(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[3135],{76482:function(y,p,e){"use strict";e.r(p);var u=e(18446),O=e(90860),c=e(58024),l=e(91894),D=e(12968),I=e(70080),v=e(54421),P=e(38272),h=e(94233),C=e(51890),m=e(39428),R=e(3182),f=e(62350),_=e(24565),i=e(57663),d=e(71577),s=e(34792),T=e(48086),o=e(2824),Z=e(1870),j=e(2521),U=e(67294),S=e(75362),F=e(36653),A=e(14370),Y=e(30381),g=e.n(Y),b=e(80877),$=e(50669),G=e(20290),n=e(85893),H=function(z){var W=z.match.params.id,L=(0,j.tT)("@@initialState"),Q=L.initialState,ne=L.setInitialState,B=Q.currentUser,J=(0,U.useState)({}),x=(0,o.Z)(J,2),a=x[0],N=x[1],V=(0,j.QT)(A.dM,{manual:!0,onSuccess:function(t,E){N(t.row)}}),K=V.run;(0,U.useEffect)(function(){K({id:W})},[]);var X=(0,j.QT)(A.v$,{manual:!0,onSuccess:function(t,E){T.default.success("\u64CD\u4F5C\u6210\u529F"),K({id:W})}}),w=X.run,k=function(t){w({id:t.id})},q=function(t){t&&j.m8.push({pathname:"/finance/caigou/edit/".concat(t.id)})},M="";return a.id>0&&B.id==a.insert_uid&&a.status=="check"&&(M=(0,n.jsxs)(n.Fragment,{children:[M,(0,n.jsx)(d.Z,{type:"primary",onClick:function(){q(a)},children:"\u4FEE\u6539"})]})),a.id>0&&B.id==a.insert_uid&&a.status!="delete"&&(M=(0,n.jsxs)(n.Fragment,{children:[M," ",(0,n.jsx)(_.Z,{title:"\u786E\u5B9A\u5F53\u524D\u64CD\u4F5C\u5417\uFF1F",onConfirm:function(){return k(a)},icon:(0,n.jsx)(Z.Z,{style:{color:"red"}}),children:(0,n.jsx)(d.Z,{type:"danger",children:"\u4F5C\u5E9F"})})]})),a.id>0?(0,n.jsxs)(S.ZP,{footer:[M],footerStyle:{textAlign:"right"},children:[(0,n.jsx)(G.Z,{tablename:"finance_caigou",parent:a.id}),(0,n.jsxs)(l.Z,{bordered:!1,children:[(0,n.jsx)(F.ZP,{column:1,request:(0,R.Z)((0,m.Z)().mark(function r(){return(0,m.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",{data:a});case 1:case"end":return E.stop()}},r)})),columns:[{title:"\u91C7\u8D2D\u90E8\u95E8",dataIndex:"department_name"},{title:"\u7533\u8BF7\u4EBA",dataIndex:"insert_user",render:function(t){return(0,n.jsxs)("span",{children:[(0,n.jsx)(C.C,{src:a.insert_avatar,shape:"round",size:"small"})," ",a.insert_user]})}},{title:"\u91C7\u8D2D\u5907\u6CE8",dataIndex:"remark"},{title:"\u4F7F\u7528\u65F6\u95F4",dataIndex:"use_time",render:function(t){return(0,n.jsxs)("span",{children:[t>0?g()(parseInt(t)*1e3).format("YYYY-MM-DD"):""," "]})}},{title:"\u5904\u7406\u72B6\u6001",dataIndex:"status",render:function(t){return(0,n.jsx)($.Z,{status:a.status,tablename:"finance_caigou"})}},{title:"\u7533\u8BF7\u65F6\u95F4",dataIndex:"insert_time",render:function(t){return(0,n.jsxs)("span",{children:[t>0?g()(parseInt(t)*1e3).format("YYYY-MM-DD HH:mm"):""," "]})}},{title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"update_time",render:function(t){return(0,n.jsxs)("span",{children:[t>0?g()(parseInt(t)*1e3).format("YYYY-MM-DD HH:mm"):""," "]})}}]}),(0,n.jsx)(P.ZP,{size:"small",header:(0,n.jsx)("div",{children:"\u91C7\u8D2D\u7269\u8D44\u660E\u7EC6"}),dataSource:a.details,renderItem:function(t){return(0,n.jsxs)(P.ZP.Item,{style:{background:"#eeeeee"},children:[(0,n.jsx)(P.ZP.Item.Meta,{title:(0,n.jsxs)(n.Fragment,{children:[t.item," * ",t.num]})}),(0,n.jsx)("div",{children:t.use})]},t.item)}}),a.imgs_arr.length>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{style:{padding:"20px 5px 0px 5px"},children:"\u5907\u6CE8\u56FE\u7247"}),a.imgs_arr.map(function(r,t){return(0,n.jsx)(I.Z,{width:80,src:r,style:{border:"1px solid #eee",background:"#eeeeee"}},r)})]}):"",(0,n.jsx)("br",{}),(0,n.jsx)(b.Z,{tablename:"finance_caigou",tableid:a.id,isEdit:!0})]})]}):(0,n.jsx)(O.Z,{active:!0})};p.default=H},14370:function(y,p,e){"use strict";e.d(p,{gp:function(){return I},dM:function(){return P},R2:function(){return C},v$:function(){return R}});var u=e(39428),O=e(11849),c=e(3182),l=e(2521),D=e(43237);function I(_,i){return v.apply(this,arguments)}function v(){return v=(0,c.Z)((0,u.Z)().mark(function _(i,d){var s;return(0,u.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,l.WY)(D.h+"finance/caigou/index",(0,O.Z)({method:"GET",params:(0,O.Z)({},i)},d||{}));case 2:return s=o.sent,o.abrupt("return",s);case 5:case"end":return o.stop()}},_)})),v.apply(this,arguments)}function P(_){return h.apply(this,arguments)}function h(){return h=(0,c.Z)((0,u.Z)().mark(function _(i){return(0,u.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,l.WY)(D.h+"finance/caigou/detail",{params:i}));case 1:case"end":return s.stop()}},_)})),h.apply(this,arguments)}function C(_){return m.apply(this,arguments)}function m(){return m=(0,c.Z)((0,u.Z)().mark(function _(i){return(0,u.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,l.WY)(D.h+"finance/caigou/form",{method:"POST",data:i}));case 1:case"end":return s.stop()}},_)})),m.apply(this,arguments)}function R(_){return f.apply(this,arguments)}function f(){return f=(0,c.Z)((0,u.Z)().mark(function _(i){return(0,u.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,l.WY)(D.h+"finance/caigou/delete",{params:i}));case 1:case"end":return s.stop()}},_)})),f.apply(this,arguments)}}}]);
