(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[7947],{90672:function(Y,I,e){"use strict";var E=e(28991),p=e(81253),x=e(85893),g=e(67294),o=e(39863),h=["fieldProps","proFieldProps"],R=function(_,P){var C=_.fieldProps,u=_.proFieldProps,m=(0,p.Z)(_,h);return(0,x.jsx)(o.Z,(0,E.Z)({ref:P,valueType:"textarea",fieldProps:C,proFieldProps:u},m))};I.Z=g.forwardRef(R)},74025:function(Y){Y.exports={avatarHolder:"avatarHolder___oJeNk",name:"name___1RI-P",detail:"detail___1zGmD",tagsTitle:"tagsTitle___2j2o-",teamTitle:"teamTitle___2ugLT",tags:"tags___xSe4Y",team:"team___33bNk",tabsCard:"tabsCard___3W4EB","ant-picker-input":"ant-picker-input___UEZIG",leftContainer:"leftContainer___25RM9",rightContainer:"rightContainer___1ACtH",year:"year___AnGXN","ant-timeline":"ant-timeline___2zkGH","ant-timeline-alternate":"ant-timeline-alternate___2sJso","ant-timeline-item-right":"ant-timeline-item-right____Mg1F","ant-timeline-item-content":"ant-timeline-item-content___1tEGn","ant-timeline-item-head":"ant-timeline-item-head___jkoUE",content:"content___6Hwqp",plan:"plan___16hUy",report:"report___3Z_rZ"}},64139:function(){},57529:function(){},80877:function(Y,I,e){"use strict";e.d(I,{Z:function(){return K}});var E=e(57663),p=e(71577),x=e(9715),g=e(55843),o=e(47673),h=e(4107),R=e(54421),A=e(38272),_=e(60663),P=e(31990),C=e(2824),u=e(67294),m=e(2521),b=e(30381),Z=e(39428),r=e(11849),s=e(3182),t=e(43237);function n(O,d){return a.apply(this,arguments)}function a(){return a=(0,s.Z)((0,Z.Z)().mark(function O(d,j){var i,D;return(0,Z.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return i=t.h+"base/comment/index",M.next=3,(0,m.WY)(i,{method:"GET",params:(0,r.Z)({},d)});case 3:return D=M.sent,M.abrupt("return",{data:D.data,success:D.success});case 5:case"end":return M.stop()}},O)})),a.apply(this,arguments)}function L(O){return U.apply(this,arguments)}function U(){return U=(0,s.Z)((0,Z.Z)().mark(function O(d){var j;return(0,Z.Z)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return j=t.h+"base/comment/save",D.abrupt("return",(0,m.WY)(j,{method:"POST",data:d}));case 2:case"end":return D.stop()}},O)})),U.apply(this,arguments)}function l(O){return v.apply(this,arguments)}function v(){return v=_asyncToGenerator(_regeneratorRuntime().mark(function O(d){var j;return _regeneratorRuntime().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return j=api+"it/"+d.tablename+"/form",D.abrupt("return",request(j,{method:"POST",data:d}));case 2:case"end":return D.stop()}},O)})),v.apply(this,arguments)}function H(O){return W.apply(this,arguments)}function W(){return W=_asyncToGenerator(_regeneratorRuntime().mark(function O(d){return _regeneratorRuntime().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",request(api+"it/think/form",_objectSpread({method:"DELETE"},d||{})));case 1:case"end":return i.stop()}},O)})),W.apply(this,arguments)}var T=e(85893),$=function(d){var j=d.tablename,i=d.tableid,D=d.isEdit,z=d.isShowContent,M=(0,u.useState)([]),ee=(0,C.Z)(M,2),V=ee[0],J=ee[1],te=(0,m.QT)(n,{manual:!0,onSuccess:function(y,re){var le=y.rows,k=[];le.map(function(Q){Q.tableid==i&&k.push(Q)}),J(k)}}),ne=te.run;(0,u.useEffect)(function(){ne({tablename:j,tableid:i})},[]);var ae=(0,u.useState)(!1),X=(0,C.Z)(ae,2),S=X[0],B=X[1],w=(0,u.useState)(""),G=(0,C.Z)(w,2),ue=G[0],se=G[1],ce=(0,m.QT)(function(F){return L(F)},{manual:!0,onSuccess:function(y){B(!1),se(""),ne({tablename:j,tableid:i})}}),ie=ce.run,_e=function(y){se(y.target.value)},oe=function(){B(!0);var y={content:ue,tablename:j,tableid:i,parent:0};ie(y)},N=function(y){if(y.indexOf("http")!=-1){var re=/(https?|http|ftp|file):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/g,le=y.replace(re,function(Q){return'<a href="'+Q+'" target=_blank>'+Q+"</a>"}),k={__html:le.replaceAll(`
`,"<br />")};return(0,T.jsx)("div",{dangerouslySetInnerHTML:k})}else return(0,T.jsx)("div",{dangerouslySetInnerHTML:{__html:y.replaceAll(`
`,"<br />")}})};return(0,T.jsxs)("div",{children:[V.length>0?(0,T.jsx)(A.ZP,{className:"comment-list",itemLayout:"horizontal",dataSource:V,renderItem:function(y){return(0,T.jsx)("li",{children:(0,T.jsx)(P.Z,{actions:y.actions,author:y.user.name,avatar:y.user.avatar,content:N(y.content),datetime:y.insert_time})})}}):"",D?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(g.Z.Item,{children:(0,T.jsx)(h.Z.TextArea,{rows:2,onChange:function(y){return _e(y)},value:ue,className:"comment_textarea___hnYGe",style:{height:"70px"}})}),(0,T.jsx)(g.Z.Item,{children:(0,T.jsx)(p.Z,{htmlType:"submit",loading:S,onClick:function(){return oe()},type:"primary",children:"\u53D1\u8868\u8BC4\u8BBA"})})]}):""]})},K=$},79554:function(Y,I,e){"use strict";var E=e(39428),p=e(3182),x=e(37476),g=e(90672),o=e(85893),h=function(A){var _=A.visible,P=A.current,C=A.onDone,u=A.onSubmit,m=A.children;return _?(0,o.jsx)(x.Y,{visible:_,title:"\u5199\u65E5\u62A5",className:"plan",width:640,onFinish:function(){var b=(0,p.Z)((0,E.Z)().mark(function Z(r){return(0,E.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:u(r);case 1:case"end":return t.stop()}},Z)}));return function(Z){return b.apply(this,arguments)}}(),initialValues:P,submitter:{render:function(Z,r){return r}},trigger:(0,o.jsx)(o.Fragment,{children:m}),modalProps:{onCancel:function(){return C()},destroyOnClose:!0},children:(0,o.jsx)(g.Z,{id:"planTextArea",className:"planTextarea",name:"content",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5DE5\u4F5C\u5185\u5BB9\u548C\u603B\u7ED3"}],placeholder:"\u8BF7\u8F93\u5165\u5DE5\u4F5C\u5185\u5BB9\u548C\u603B\u7ED3\uFF0C\u5982\u679C\u6709\u95EE\u9898\u3001\u6536\u83B7\u3001\u5EFA\u8BAE\u4E5F\u53EF\u5199\u5728\u6B64\u5904\u54E6\uFF5E"})}):null};I.Z=h},65212:function(Y,I,e){"use strict";e.r(I);var E=e(58024),p=e(91894),x=e(87593),g=e(37636),o=e(94233),h=e(51890),R=e(88983),A=e(55742),_=e(2824),P=e(67724),C=e(8812),u=e(67294),m=e(75362),b=e(21349),Z=e(74025),r=e.n(Z),s=e(30381),t=e.n(s),n=e(79554),a=e(67547),L=e(2521),U=e(80877),l=e(85893),v=function(){var W=(0,L.tT)("@@initialState"),T=W.initialState,$=W.setInitialState,K=T.currentUser,O=(0,u.useState)([]),d=(0,_.Z)(O,2),j=d[0],i=d[1],D=(0,u.useState)([]),z=(0,_.Z)(D,2),M=z[0],ee=z[1],V=(0,u.useState)([]),J=(0,_.Z)(V,2),te=J[0],ne=J[1],ae=(0,u.useState)(!0),X=(0,_.Z)(ae,2),S=X[0],B=X[1],w=(0,L.QT)(a.gp,{manual:!0,onSuccess:function(f,q){i(f.list),ee(f.monday),ne(f.sunday),B(!1)}}),G=w.run;(0,u.useEffect)(function(){G()},[]);var ue=(0,u.useState)(!1),se=(0,_.Z)(ue,2),ce=se[0],ie=se[1],_e=(0,u.useState)(void 0),oe=(0,_.Z)(_e,2),N=oe[0],F=oe[1],y=function(f){f==-1?G({time:M-86400*7}):f==1&&G({time:Number(M)+Number(86400*7)})},re=function(f){f?L.m8.push({pathname:"/oa/plan/".concat(f)}):L.m8.push({pathname:"/oa/plan"})},le=(0,L.QT)(function(c,f){if(c==="remove")return(0,a.v$)(f);var q={content:f.content,time:N==null?void 0:N.time,cycle:N==null?void 0:N.cycle,id:N==null?void 0:N.id};return(0,a.oc)(q)},{manual:!0,onSuccess:function(f){G({time:M})}}),k=le.run,Q=function(f,q){f==="save"?me(q):f==="delete"&&Modal.confirm({title:"\u5220\u9664\u5DE5\u4F5C\u65E5\u62A5",content:"\u786E\u5B9A\u5220\u9664\u8BE5\u8BB0\u5F55\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){return de(q.id)}})},me=function(f){ie(!0),F(f)},de=function(f){k("remove",{id:f})},ve=function(){ie(!1),F({})},fe=function(f){ie(!1);var q=f!=null&&f.id?"update":"add";k(q,Object.assign(f,{summary:""}))};return(0,l.jsxs)(m.ZP,{children:[(0,l.jsxs)(A.ZP.Group,{defaultValue:"\u5DE5\u4F5C\u65E5\u62A5",buttonStyle:"solid",children:[(0,l.jsx)(A.ZP.Button,{value:"\u5DE5\u4F5C\u65E5\u62A5",onClick:function(){return re()},children:"\u5DE5\u4F5C\u65E5\u62A5"}),(0,l.jsx)(A.ZP.Button,{value:"\u8BA1\u5212\u62A5\u544A",onClick:function(){return re("report")},children:"\u8BA1\u5212\u62A5\u544A"})]}),(0,l.jsxs)(b.Z,{children:[(0,l.jsx)("br",{}),(0,l.jsx)(p.Z,{title:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("a",{style:{paddingRight:"24px",fontSize:"14px"},onClick:function(){return y(-1)},children:[(0,l.jsx)(P.Z,{}),"\u4E0A\u4E00\u5468"]}),(0,l.jsxs)("span",{children:[t()(parseInt(M)*1e3).format("YYYY/MM/DD"),"~",t()(parseInt(te)*1e3).format("YYYY/MM/DD")]}),(0,l.jsxs)("a",{style:{paddingLeft:"24px",fontSize:"14px"},onClick:function(){return y(1)},children:["\u4E0B\u4E00\u5468",(0,l.jsx)(C.Z,{})]})]}),className:r().tabsCard,bordered:!1,extra:K&&K.job_id==12?"":(0,l.jsx)("a",{onClick:function(){return re("others")},children:"\u67E5\u770B\u4F19\u4F34\u7684\u65E5\u62A5"}),children:(0,l.jsx)(g.Z,{children:j.map(function(c){return(0,l.jsx)(g.Z.Item,{dot:(0,l.jsx)(h.C,{style:{backgroundColor:c.active?"#e27f19":"#a6d1e9"},size:"large",children:c.week}),children:c.plan?(0,l.jsxs)("div",{style:{marginLeft:"20px",minHeight:"100px"},children:[(0,l.jsx)("div",{style:{padding:"12px",border:"2px solid",lineHeight:"28px",borderColor:c.active?"#e27f19":"#a6d1e9"},dangerouslySetInnerHTML:{__html:c&&c.plan.content?c.plan.content.replaceAll(`
`,"<br />"):"\u6682\u65E0\u5185\u5BB9"}}),(0,l.jsxs)("p",{style:{color:"#00000040",marginTop:"5px"},children:["\u66F4\u65B0\u4E8E ",c.plan.update_time>0?t()(parseInt(c.plan.update_time)*1e3).format("YYYY-MM-DD HH:mm"):"","\xA0\xA0",c.is_edit?(0,l.jsx)("a",{onClick:function(){return Q("save",c.plan)},children:"\u70B9\u51FB\u91CD\u65B0\u5199\u65E5\u62A5"}):""]}),(0,l.jsx)(U.Z,{tablename:"oa_plan",tableid:c.plan.id,isEdit:!1})]}):(0,l.jsxs)("div",{style:{marginLeft:"20px",height:"100px"},children:[(0,l.jsx)("p",{style:{color:"#00000040"},children:"\u8FD8\u6CA1\u6709\u5236\u5B9A\u4EFB\u4F55\u8BA1\u5212"}),c.is_edit?(0,l.jsx)("a",{onClick:function(){return Q("save",{time:c.time,cycle:"day"})},children:"\u70B9\u51FB\u5199\u65E5\u62A5"}):""]})},c.time)})})})]}),(0,l.jsx)(n.Z,{visible:ce,current:N,cycle:"day",onDone:ve,onSubmit:fe})]})};I.default=v},67547:function(Y,I,e){"use strict";e.d(I,{gp:function(){return h},v$:function(){return A},oc:function(){return P},KS:function(){return u},QL:function(){return b}});var E=e(39428),p=e(11849),x=e(3182),g=e(2521),o=e(43237);function h(r){return R.apply(this,arguments)}function R(){return R=(0,x.Z)((0,E.Z)().mark(function r(s){var t;return(0,E.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.WY)(o.h+"oa/plan/index",{method:"GET",params:(0,p.Z)({},s)});case 2:return t=a.sent,a.abrupt("return",{data:t.data,success:t.success});case 4:case"end":return a.stop()}},r)})),R.apply(this,arguments)}function A(r){return _.apply(this,arguments)}function _(){return _=(0,x.Z)((0,E.Z)().mark(function r(s){return(0,E.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,g.WY)(o.h+"oa/plan/delete",{method:"DELETE",data:s}));case 1:case"end":return n.stop()}},r)})),_.apply(this,arguments)}function P(r){return C.apply(this,arguments)}function C(){return C=(0,x.Z)((0,E.Z)().mark(function r(s){return(0,E.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,g.WY)(o.h+"oa/plan/save",{method:"POST",data:s}));case 1:case"end":return n.stop()}},r)})),C.apply(this,arguments)}function u(r){return m.apply(this,arguments)}function m(){return m=(0,x.Z)((0,E.Z)().mark(function r(s){var t;return(0,E.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.WY)(o.h+"oa/plan/weekline",{method:"GET",params:(0,p.Z)({},s)});case 2:return t=a.sent,a.abrupt("return",{data:t.data,success:t.success});case 4:case"end":return a.stop()}},r)})),m.apply(this,arguments)}function b(r){return Z.apply(this,arguments)}function Z(){return Z=(0,x.Z)((0,E.Z)().mark(function r(s){var t;return(0,E.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.WY)(o.h+"oa/plan/report",{method:"GET",params:(0,p.Z)({},s)});case 2:return t=a.sent,a.abrupt("return",{data:t.data,success:t.success});case 4:case"end":return a.stop()}},r)})),Z.apply(this,arguments)}},31990:function(Y,I,e){"use strict";var E=e(22122),p=e(96156),x=e(94184),g=e.n(x),o=e(67294),h=e(53124),R=function(_,P){var C={};for(var u in _)Object.prototype.hasOwnProperty.call(_,u)&&P.indexOf(u)<0&&(C[u]=_[u]);if(_!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,u=Object.getOwnPropertySymbols(_);m<u.length;m++)P.indexOf(u[m])<0&&Object.prototype.propertyIsEnumerable.call(_,u[m])&&(C[u[m]]=_[u[m]]);return C},A=function(P){var C=P.actions,u=P.author,m=P.avatar,b=P.children,Z=P.className,r=P.content,s=P.prefixCls,t=P.datetime,n=R(P,["actions","author","avatar","children","className","content","prefixCls","datetime"]),a=o.useContext(h.E_),L=a.getPrefixCls,U=a.direction,l=function(d,j){return o.createElement("div",{className:g()("".concat(d,"-nested"))},j)},v=L("comment",s),H=m?o.createElement("div",{className:"".concat(v,"-avatar")},typeof m=="string"?o.createElement("img",{src:m,alt:"comment-avatar"}):m):null,W=C&&C.length?o.createElement("ul",{className:"".concat(v,"-actions")},C.map(function(O,d){return o.createElement("li",{key:"action-".concat(d)},O)})):null,T=(u||t)&&o.createElement("div",{className:"".concat(v,"-content-author")},u&&o.createElement("span",{className:"".concat(v,"-content-author-name")},u),t&&o.createElement("span",{className:"".concat(v,"-content-author-time")},t)),$=o.createElement("div",{className:"".concat(v,"-content")},T,o.createElement("div",{className:"".concat(v,"-content-detail")},r),W),K=g()(v,(0,p.Z)({},"".concat(v,"-rtl"),U==="rtl"),Z);return o.createElement("div",(0,E.Z)({},n,{className:K}),o.createElement("div",{className:"".concat(v,"-inner")},H,$),b?l(v,b):null)};I.Z=A},60663:function(Y,I,e){"use strict";var E=e(38663),p=e.n(E),x=e(64139),g=e.n(x)},37636:function(Y,I,e){"use strict";e.d(I,{Z:function(){return Z}});var E=e(22122),p=e(96156),x=e(7085),g=e(94184),o=e.n(g),h=e(67294),R=e(53124),A=e(96159),_=function(r,s){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&s.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)s.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(t[n[a]]=r[n[a]]);return t},P=function(s){var t,n,a=s.prefixCls,L=s.className,U=s.color,l=U===void 0?"blue":U,v=s.dot,H=s.pending,W=H===void 0?!1:H,T=s.position,$=s.label,K=s.children,O=_(s,["prefixCls","className","color","dot","pending","position","label","children"]),d=h.useContext(R.E_),j=d.getPrefixCls,i=j("timeline",a),D=o()((t={},(0,p.Z)(t,"".concat(i,"-item"),!0),(0,p.Z)(t,"".concat(i,"-item-pending"),W),t),L),z=o()((n={},(0,p.Z)(n,"".concat(i,"-item-head"),!0),(0,p.Z)(n,"".concat(i,"-item-head-custom"),!!v),(0,p.Z)(n,"".concat(i,"-item-head-").concat(l),!0),n)),M=/blue|red|green|gray/.test(l||"")?void 0:l;return h.createElement("li",(0,E.Z)({},O,{className:D}),$&&h.createElement("div",{className:"".concat(i,"-item-label")},$),h.createElement("div",{className:"".concat(i,"-item-tail")}),h.createElement("div",{className:z,style:{borderColor:M,color:M}},v),h.createElement("div",{className:"".concat(i,"-item-content")},K))},C=P,u=function(r,s){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&s.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)s.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(t[n[a]]=r[n[a]]);return t},m=function(s){var t,n=h.useContext(R.E_),a=n.getPrefixCls,L=n.direction,U=s.prefixCls,l=s.pending,v=l===void 0?null:l,H=s.pendingDot,W=s.children,T=s.className,$=s.reverse,K=$===void 0?!1:$,O=s.mode,d=O===void 0?"":O,j=u(s,["prefixCls","pending","pendingDot","children","className","reverse","mode"]),i=a("timeline",U),D=typeof v=="boolean"?null:v,z=v?h.createElement(C,{pending:!!v,dot:H||h.createElement(x.Z,null)},D):null,M=h.Children.toArray(W);M.push(z),K&&M.reverse();var ee=function(B,w){return d==="alternate"?B.props.position==="right"?"".concat(i,"-item-right"):B.props.position==="left"||w%2==0?"".concat(i,"-item-left"):"".concat(i,"-item-right"):d==="left"?"".concat(i,"-item-left"):d==="right"||B.props.position==="right"?"".concat(i,"-item-right"):""},V=M.filter(function(S){return!!S}),J=h.Children.count(V),te="".concat(i,"-item-last"),ne=h.Children.map(V,function(S,B){var w=B===J-2?te:"",G=B===J-1?te:"";return(0,A.Tm)(S,{className:o()([S.props.className,!K&&!!v?w:G,ee(S,B)])})}),ae=M.some(function(S){var B;return!!((B=S==null?void 0:S.props)===null||B===void 0?void 0:B.label)}),X=o()(i,(t={},(0,p.Z)(t,"".concat(i,"-pending"),!!v),(0,p.Z)(t,"".concat(i,"-reverse"),!!K),(0,p.Z)(t,"".concat(i,"-").concat(d),!!d&&!ae),(0,p.Z)(t,"".concat(i,"-label"),ae),(0,p.Z)(t,"".concat(i,"-rtl"),L==="rtl"),t),T);return h.createElement("ul",(0,E.Z)({},j,{className:X}),ne)};m.Item=C;var b=m,Z=b},87593:function(Y,I,e){"use strict";var E=e(38663),p=e.n(E),x=e(57529),g=e.n(x)}}]);
