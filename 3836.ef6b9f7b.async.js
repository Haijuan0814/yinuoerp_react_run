(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[3836],{64139:function(){},80877:function(re,R,e){"use strict";e.d(R,{Z:function(){return J}});var A=e(57663),S=e(71577),Z=e(9715),g=e(55843),h=e(47673),B=e(4107),W=e(54421),K=e(38272),O=e(60663),E=e(31990),P=e(2824),a=e(67294),r=e(2521),z=e(30381),I=e(39428),b=e(11849),U=e(3182),y=e(43237);function N(_,u){return D.apply(this,arguments)}function D(){return D=(0,U.Z)((0,I.Z)().mark(function _(u,m){var s,i;return(0,I.Z)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return s=y.h+"base/comment/index",C.next=3,(0,r.WY)(s,{method:"GET",params:(0,b.Z)({},u)});case 3:return i=C.sent,C.abrupt("return",{data:i.data,success:i.success});case 5:case"end":return C.stop()}},_)})),D.apply(this,arguments)}function p(_){return T.apply(this,arguments)}function T(){return T=(0,U.Z)((0,I.Z)().mark(function _(u){var m;return(0,I.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return m=y.h+"base/comment/save",i.abrupt("return",(0,r.WY)(m,{method:"POST",data:u}));case 2:case"end":return i.stop()}},_)})),T.apply(this,arguments)}function Q(_){return d.apply(this,arguments)}function d(){return d=_asyncToGenerator(_regeneratorRuntime().mark(function _(u){var m;return _regeneratorRuntime().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return m=api+"it/"+u.tablename+"/form",i.abrupt("return",request(m,{method:"POST",data:u}));case 2:case"end":return i.stop()}},_)})),d.apply(this,arguments)}function V(_){return x.apply(this,arguments)}function x(){return x=_asyncToGenerator(_regeneratorRuntime().mark(function _(u){return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",request(api+"it/think/form",_objectSpread({method:"DELETE"},u||{})));case 1:case"end":return s.stop()}},_)})),x.apply(this,arguments)}var f=e(85893),n=function(u){var m=u.tablename,s=u.tableid,i=u.isEdit,X=u.isShowContent,C=(0,a.useState)([]),F=(0,P.Z)(C,2),c=F[0],se=F[1],w=(0,r.QT)(N,{manual:!0,onSuccess:function(l,H){var $=l.rows,L=[];$.map(function(j){j.tableid==s&&L.push(j)}),se(L)}}),k=w.run;(0,a.useEffect)(function(){k({tablename:m,tableid:s})},[]);var de=(0,a.useState)(!1),q=(0,P.Z)(de,2),oe=q[0],ee=q[1],le=(0,a.useState)(""),te=(0,P.Z)(le,2),ne=te[0],Y=te[1],ue=(0,r.QT)(function(M){return p(M)},{manual:!0,onSuccess:function(l){ee(!1),Y(""),k({tablename:m,tableid:s})}}),G=ue.run,ie=function(l){Y(l.target.value)},ae=function(){ee(!0);var l={content:ne,tablename:m,tableid:s,parent:0};G(l)},ce=function(l){if(l.indexOf("http")!=-1){var H=/(https?|http|ftp|file):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/g,$=l.replace(H,function(j){return'<a href="'+j+'" target=_blank>'+j+"</a>"}),L={__html:$.replaceAll(`
`,"<br />")};return(0,f.jsx)("div",{dangerouslySetInnerHTML:L})}else return(0,f.jsx)("div",{dangerouslySetInnerHTML:{__html:l.replaceAll(`
`,"<br />")}})};return(0,f.jsxs)("div",{children:[c.length>0?(0,f.jsx)(K.ZP,{className:"comment-list",itemLayout:"horizontal",dataSource:c,renderItem:function(l){return(0,f.jsx)("li",{children:(0,f.jsx)(E.Z,{actions:l.actions,author:l.user.name,avatar:l.user.avatar,content:ce(l.content),datetime:l.insert_time})})}}):"",i?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(g.Z.Item,{children:(0,f.jsx)(B.Z.TextArea,{rows:2,onChange:function(l){return ie(l)},value:ne,className:"comment_textarea___hnYGe",style:{height:"70px"}})}),(0,f.jsx)(g.Z.Item,{children:(0,f.jsx)(S.Z,{htmlType:"submit",loading:oe,onClick:function(){return ae()},type:"primary",children:"\u53D1\u8868\u8BC4\u8BBA"})})]}):""]})},J=n},73836:function(re,R,e){"use strict";var A=e(58024),S=e(91894),Z=e(48736),g=e(27049),h=e(20136),B=e(55241),W=e(39428),K=e(3182),O=e(57663),E=e(71577),P=e(18446),a=e(90860),r=e(2824),z=e(402),I=e(97272),b=e(92977),U=e(18267),y=e(75362),N=e(36653),D=e(2521),p=e(67294),T=e(66822),Q=e(722),d=e(80877),V=e(30381),x=e.n(V),f=e(97),n=e(85893),J=I.Z.Paragraph,_=function(m){var s=m.tablename,i=m.module,X=m.id,C=(0,p.useState)({}),F=(0,r.Z)(C,2),c=F[0],se=F[1],w=(0,D.tT)("@@initialState"),k=w.initialState,de=w.setInitialState,q=k.currentUser,oe=(0,D.QT)(T.dM,{manual:!0,onSuccess:function(t,v){se(t.row)}}),ee=oe.run;(0,p.useEffect)(function(){ee({tablename:s,id:X})},[]);var le=function(t){if(t){var v=i?"/it/".concat(i,"/").concat(s,"/edit/").concat(t.id):"/it/".concat(s,"/edit/").concat(t.id);D.m8.push({pathname:v})}},te=function(t){if(t.length>1)return t.map(function(v){return(0,n.jsx)("p",{children:v.name})})},ne=(0,p.useState)(!1),Y=(0,r.Z)(ne,2),ue=Y[0],G=Y[1],ie=(0,p.useState)("related"),ae=(0,r.Z)(ie,2),ce=ae[0],M=ae[1],l=(0,p.useState)("\u5173\u8054\u4EBA\u5458"),H=(0,r.Z)(l,2),$=H[0],L=H[1],j=function(){G(!0)},_e=function(t,v){M(t),L(v),j()},ve=function(t){console.log(t),G(!1),he(t)},Ee=function(t){G(!1)},fe=(0,D.QT)(function(o){return o.tablename=s,o.id=X,o.field=ce,(0,T.ko)(o)},{manual:!0,onSuccess:function(t){location.reload()}}),he=fe.run,Pe=!c.id;return Pe?(0,n.jsx)(a.Z,{active:!0}):(0,n.jsxs)(y.ZP,{title:c==null?void 0:c.title,extra:q.id==c.insert_uid?[(0,n.jsx)(E.Z,{type:"primary",onClick:function(){le(c)},children:"\u7F16\u8F91\u6587\u6863"})]:"",content:(0,n.jsx)(N.ZP,{column:{xs:1,sm:2,md:3},request:(0,K.Z)((0,W.Z)().mark(function o(){return(0,W.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",{data:c||{}});case 1:case"end":return v.stop()}},o)})),params:{id:c==null?void 0:c.id},columns:[{title:"\u521B\u5EFA\u4EBA",dataIndex:"insert_user"},{title:"\u6240\u5C5E\u4EA7\u54C1",dataIndex:"products",column:2,render:function(t){var v=Object.values(t),me=v[0],De=te(v);return(0,n.jsxs)("span",{children:[me.name,v.length>1?(0,n.jsx)(B.Z,{content:De,trigger:"hover",children:(0,n.jsx)(b.Z,{style:{color:"#1890ff"}})}):""]})}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"insert_time",render:function(t){return(0,n.jsxs)("span",{children:[t>0?x()(parseInt(t)*1e3).format("YYYY-MM-DD HH:mm"):""," "]})}},{title:"\u5904\u7406\u4EBA",dataIndex:"deal_user",render:function(t){return(0,n.jsxs)("span",{children:[t," ",(0,n.jsx)("a",{onClick:function(){return _e("deal_uids","\u5904\u7406\u4EBA\u5458")},children:(0,n.jsx)(U.Z,{})})]})}},{title:"\u5904\u7406\u72B6\u6001",dataIndex:"status",render:function(t){return(0,n.jsx)(Q.Z,{tablename:s,statusVal:t,id:c.id,row:c})}},{title:"\u6700\u540E\u66F4\u65B0",dataIndex:"update_time",render:function(t){return(0,n.jsxs)("span",{children:[t>0?x()(parseInt(t)*1e3).format("YYYY-MM-DD HH:mm"):""," "]})}},{title:"\u5173\u8054\u4EBA",dataIndex:"related_user",render:function(t,v){return(0,n.jsxs)("span",{children:[t," ",(0,n.jsx)("a",{onClick:function(){return _e("related_uids","\u5173\u8054\u4EBA")},children:(0,n.jsx)(U.Z,{})})]})}},{title:"\u8BA1\u5212\u65F6\u95F4",dataIndex:"date"}]}),children:[(0,n.jsxs)(S.Z,{children:[(0,n.jsx)("div",{dangerouslySetInnerHTML:{__html:c.content?c.content:"\u6682\u65E0\u5185\u5BB9"},className:"editorDetail"}),(0,n.jsx)(g.Z,{}),(0,n.jsx)(d.Z,{tablename:"it_"+s,tableid:c.id,isEdit:!0})]}),(0,n.jsx)(f.Z,{visible:ue,onSubmit:ve,userlabel:$,onCancel:Ee})]})};R.Z=_},31990:function(re,R,e){"use strict";var A=e(22122),S=e(96156),Z=e(94184),g=e.n(Z),h=e(67294),B=e(53124),W=function(O,E){var P={};for(var a in O)Object.prototype.hasOwnProperty.call(O,a)&&E.indexOf(a)<0&&(P[a]=O[a]);if(O!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(O);r<a.length;r++)E.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(O,a[r])&&(P[a[r]]=O[a[r]]);return P},K=function(E){var P=E.actions,a=E.author,r=E.avatar,z=E.children,I=E.className,b=E.content,U=E.prefixCls,y=E.datetime,N=W(E,["actions","author","avatar","children","className","content","prefixCls","datetime"]),D=h.useContext(B.E_),p=D.getPrefixCls,T=D.direction,Q=function(u,m){return h.createElement("div",{className:g()("".concat(u,"-nested"))},m)},d=p("comment",U),V=r?h.createElement("div",{className:"".concat(d,"-avatar")},typeof r=="string"?h.createElement("img",{src:r,alt:"comment-avatar"}):r):null,x=P&&P.length?h.createElement("ul",{className:"".concat(d,"-actions")},P.map(function(_,u){return h.createElement("li",{key:"action-".concat(u)},_)})):null,f=(a||y)&&h.createElement("div",{className:"".concat(d,"-content-author")},a&&h.createElement("span",{className:"".concat(d,"-content-author-name")},a),y&&h.createElement("span",{className:"".concat(d,"-content-author-time")},y)),n=h.createElement("div",{className:"".concat(d,"-content")},f,h.createElement("div",{className:"".concat(d,"-content-detail")},b),x),J=g()(d,(0,S.Z)({},"".concat(d,"-rtl"),T==="rtl"),I);return h.createElement("div",(0,A.Z)({},N,{className:J}),h.createElement("div",{className:"".concat(d,"-inner")},V,n),z?Q(d,z):null)};R.Z=K},60663:function(re,R,e){"use strict";var A=e(38663),S=e.n(A),Z=e(64139),g=e.n(Z)}}]);
