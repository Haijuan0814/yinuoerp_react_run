(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[9531],{3178:function(){},62389:function(Te,ee,e){"use strict";e.r(ee),e.d(ee,{default:function(){return he}});var V=e(18106),ae=e(32267),R=e(34792),Y=e(48086),j=e(39428),$=e(11849),H=e(3182),te=e(2824),Be=e(17462),xe=e(76772),Ze=e(89366),ie=e(2603),ye=e(29985),Z=e(67294),Le=e(57663),c=e(71577),De=e(47673),Fe=e(4107),y=e(28991),J=e(55507),ue=e(92137),ce=e(81253),ne=e(28481),Oe=e(9715),Ee=e(55843),a=e(85893),de=e(52772),Pe=["rules","name","phoneName","fieldProps","captchaTextRender","captchaProps"],je=Z.forwardRef(function(o,C){var g=Ee.Z.useFormInstance(),I=(0,Z.useState)(o.countDown||60),F=(0,ne.Z)(I,2),d=F[0],L=F[1],K=(0,Z.useState)(!1),k=(0,ne.Z)(K,2),A=k[0],T=k[1],b=(0,Z.useState)(),q=(0,ne.Z)(b,2),D=q[0],p=q[1],U=o.rules,S=o.name,oe=o.phoneName,_=o.fieldProps,le=o.captchaTextRender,Ce=le===void 0?function(l,v){return l?"".concat(v," \u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"}:le,B=o.captchaProps,x=(0,ce.Z)(o,Pe),h=function(){var l=(0,ue.Z)((0,J.Z)().mark(function v(r){return(0,J.Z)().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.prev=0,p(!0),N.next=4,x.onGetCaptcha(r);case 4:p(!1),T(!0),N.next=13;break;case 8:N.prev=8,N.t0=N.catch(0),T(!1),p(!1),console.log(N.t0);case 13:case"end":return N.stop()}},v,null,[[0,8]])}));return function(r){return l.apply(this,arguments)}}();return(0,Z.useImperativeHandle)(C,function(){return{startTiming:function(){return T(!0)},endTiming:function(){return T(!1)}}}),(0,Z.useEffect)(function(){var l=0,v=o.countDown;return A&&(l=window.setInterval(function(){L(function(r){return r<=1?(T(!1),clearInterval(l),v||60):r-1})},1e3)),function(){return clearInterval(l)}},[A]),(0,a.jsxs)("div",{style:(0,y.Z)((0,y.Z)({},_==null?void 0:_.style),{},{display:"flex",alignItems:"center"}),ref:C,children:[(0,a.jsx)(Fe.Z,(0,y.Z)((0,y.Z)({},_),{},{style:{flex:1,transition:"width .3s",marginRight:8}})),(0,a.jsx)(c.Z,(0,y.Z)((0,y.Z)({style:{display:"block"},disabled:A,loading:D},B),{},{onClick:function(){var l=(0,ue.Z)((0,J.Z)().mark(function r(){var G;return(0,J.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(s.prev=0,!oe){s.next=9;break}return s.next=4,g.validateFields([oe].flat(1));case 4:return G=g.getFieldValue([oe].flat(1)),s.next=7,h(G);case 7:s.next=11;break;case 9:return s.next=11,h("");case 11:s.next=16;break;case 13:s.prev=13,s.t0=s.catch(0),console.log(s.t0);case 16:case"end":return s.stop()}},r,null,[[0,13]])}));function v(){return l.apply(this,arguments)}return v}(),children:Ce(A,d)}))]})}),Me=(0,de.G)(je),fe=Me,Se=e(63185),E=e(9676),t=e(96202),i=e(39863),n=["options","fieldProps","proFieldProps","valueEnum"],u=Z.forwardRef(function(o,C){var g=o.options,I=o.fieldProps,F=o.proFieldProps,d=o.valueEnum,L=(0,ce.Z)(o,n);return(0,a.jsx)(i.Z,(0,y.Z)({ref:C,valueType:"checkbox",valueEnum:(0,t.h)(d,void 0),fieldProps:(0,y.Z)({options:g},I),lightProps:(0,y.Z)({labelFormatter:function(){return(0,a.jsx)(i.Z,(0,y.Z)({ref:C,valueType:"checkbox",mode:"read",valueEnum:(0,t.h)(d,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,y.Z)({options:g},I),proFieldProps:F},L))}},L.lightProps),proFieldProps:F},L))}),P=Z.forwardRef(function(o,C){var g=o.fieldProps,I=o.children;return(0,a.jsx)(E.Z,(0,y.Z)((0,y.Z)({ref:C},g),{},{children:I}))}),M=(0,de.G)(P,{valuePropName:"checked"}),z=M;z.Group=u;var Q=z,X=e(952),O=e(5966),f=e(2521),se=e(73727),re=e(2540),ve=e(54083),Ne=e(43237);function me(o,C){return w.apply(this,arguments)}function w(){return w=(0,H.Z)((0,j.Z)().mark(function o(C,g){return(0,j.Z)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.abrupt("return",(0,f.WY)(Ne.h+"login/captcha",(0,$.Z)({method:"GET",params:(0,$.Z)({},C)},g||{})));case 1:case"end":return F.stop()}},o)})),w.apply(this,arguments)}var Ie=e(34687),m=e.n(Ie),W=e(11768),ge=function(C){var g=C.content;return(0,a.jsx)(xe.Z,{style:{marginBottom:24},message:g,type:"error",showIcon:!0})},pe=function(){var C=(0,Z.useState)(!1),g=(0,te.Z)(C,2),I=g[0],F=g[1],d=(0,Z.useState)({}),L=(0,te.Z)(d,2),K=L[0],k=L[1],A=(0,Z.useState)("account"),T=(0,te.Z)(A,2),b=T[0],q=T[1],D=(0,f.tT)("@@initialState"),p=D.initialState,U=D.setInitialState,S=(0,f.YB)(),oe=function(){var B=(0,H.Z)((0,j.Z)().mark(function x(){var h,l;return(0,j.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,p==null||(h=p.fetchUserInfo)===null||h===void 0?void 0:h.call(p);case 2:if(l=r.sent,!l){r.next=6;break}return r.next=6,U(function(G){return(0,$.Z)((0,$.Z)({},G),{},{currentUser:l})});case 6:case"end":return r.stop()}},x)}));return function(){return B.apply(this,arguments)}}(),_=function(){var B=(0,H.Z)((0,j.Z)().mark(function x(h){var l,v,r,G;return(0,j.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return F(!0),s.prev=1,s.next=4,(0,ve.x4)((0,$.Z)((0,$.Z)({},h),{},{type:b}));case 4:if(l=s.sent,l.success!==!0){s.next=17;break}return v=S.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),Y.default.success(v),W.ZP.save("userInfo",l.data,{path:"/",expires:new Date(new Date().getTime()+24*3600*1e3*365)}),s.next=11,oe();case 11:if(f.m8){s.next=13;break}return s.abrupt("return");case 13:return r=f.m8.location.query,G=r.redirect,f.m8.push(G||"/"),s.abrupt("return");case 17:k(l),s.next=23;break;case 20:s.prev=20,s.t0=s.catch(1),Y.default.error("\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01");case 23:F(!1);case 24:case"end":return s.stop()}},x,null,[[1,20]])}));return function(h){return B.apply(this,arguments)}}(),le=K.status,Ce=K.type;return(0,a.jsxs)("div",{className:m().container,children:[(0,a.jsx)("div",{className:m().lang,"data-lang":!0,children:f.pD&&(0,a.jsx)(f.pD,{})}),(0,a.jsxs)("div",{className:m().content,children:[(0,a.jsxs)("div",{className:m().top,children:[(0,a.jsx)("div",{className:m().header,children:(0,a.jsxs)(se.rU,{to:"/",children:[(0,a.jsx)("img",{alt:"logo",className:m().logo,src:"/logo.png"}),(0,a.jsx)("span",{className:m().title,children:"\u4F9D\u8BFA\u6570\u5B57"})]})}),(0,a.jsx)("div",{className:m().desc,children:S.formatMessage({id:"pages.layouts.userLayout.title"})})]}),(0,a.jsxs)("div",{className:m().main,children:[(0,a.jsxs)(X.ZP,{initialValues:{autoLogin:!0},submitter:{searchConfig:{submitText:S.formatMessage({id:"pages.login.submit",defaultMessage:"\u767B\u5F55"})},render:function(x,h){return h.pop()},submitButtonProps:{loading:I,size:"large",style:{width:"100%"}}},onFinish:function(){var B=(0,H.Z)((0,j.Z)().mark(function x(h){return(0,j.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,_(h);case 2:case"end":return v.stop()}},x)}));return function(x){return B.apply(this,arguments)}}(),children:[(0,a.jsx)(ae.Z,{activeKey:b,onChange:q,children:(0,a.jsx)(ae.Z.TabPane,{tab:S.formatMessage({id:"pages.login.accountLogin.tab",defaultMessage:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"})},"account")}),le==="error"&&Ce==="account"&&(0,a.jsx)(ge,{content:S.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF(admin/ant.design)"})}),b==="account"&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(O.Z,{name:"username",fieldProps:{size:"large",prefix:(0,a.jsx)(Ze.Z,{className:m().prefixIcon})},placeholder:S.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u59D3\u540D"}),rules:[{required:!0,message:(0,a.jsx)(f._H,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u59D3\u540D!"})}]}),(0,a.jsx)(O.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,a.jsx)(ie.Z,{className:m().prefixIcon})},placeholder:S.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801"}),rules:[{required:!0,message:(0,a.jsx)(f._H,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),le==="error"&&Ce==="mobile"&&(0,a.jsx)(ge,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),b==="mobile"&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(O.Z,{fieldProps:{size:"large",prefix:(0,a.jsx)(ye.Z,{className:m().prefixIcon})},name:"mobile",placeholder:S.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"\u624B\u673A\u53F7"}),rules:[{required:!0,message:(0,a.jsx)(f._H,{id:"pages.login.phoneNumber.required",defaultMessage:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"})},{pattern:/^1\d{10}$/,message:(0,a.jsx)(f._H,{id:"pages.login.phoneNumber.invalid",defaultMessage:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"})}]}),(0,a.jsx)(fe,{fieldProps:{size:"large",prefix:(0,a.jsx)(ie.Z,{className:m().prefixIcon})},captchaProps:{size:"large"},placeholder:S.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}),captchaTextRender:function(x,h){return x?"".concat(h," ").concat(S.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})):S.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})},name:"captcha",rules:[{required:!0,message:(0,a.jsx)(f._H,{id:"pages.login.captcha.required",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"})}],onGetCaptcha:function(){var B=(0,H.Z)((0,j.Z)().mark(function x(h){var l;return(0,j.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,me({phone:h});case 2:if(l=r.sent,l!==!1){r.next=5;break}return r.abrupt("return");case 5:Y.default.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F\uFF01\u9A8C\u8BC1\u7801\u4E3A\uFF1A1234");case 6:case"end":return r.stop()}},x)}));return function(x){return B.apply(this,arguments)}}()})]}),(0,a.jsxs)("div",{style:{marginBottom:24},children:[(0,a.jsx)(Q,{noStyle:!0,name:"autoLogin",children:(0,a.jsx)(f._H,{id:"pages.login.rememberMe",defaultMessage:"\u81EA\u52A8\u767B\u5F55"})}),(0,a.jsx)("a",{style:{float:"right"},children:(0,a.jsx)("a",{href:"/#/user/forget",children:(0,a.jsx)(f._H,{id:"pages.login.forgotPassword",defaultMessage:"\u5FD8\u8BB0\u5BC6\u7801/\u8D26\u53F7\u6FC0\u6D3B"})})})]})]}),(0,a.jsx)("div",{className:m().other,children:(0,a.jsx)("a",{href:"/#/user/weixin",children:"\u4F01\u4E1A\u5FAE\u4FE1\u767B\u5F55"})})]})]}),(0,a.jsx)(re.Z,{})]})},he=pe},76772:function(Te,ee,e){"use strict";e.d(ee,{Z:function(){return Se}});var V=e(22122),ae=e(28481),R=e(96156),Y=e(38819),j=e(15873),$=e(43061),H=e(73218),te=e(54549),Be=e(68855),xe=e(57119),Ze=e(40847),ie=e(68628),ye=e(94184),Z=e.n(ye),Le=e(69255),c=e(67294),De=e(53124),Fe=e(5467),y=e(96159),J=e(6610),ue=e(5991),ce=e(10379),ne=e(44144),Oe=function(E){(0,ce.Z)(i,E);var t=(0,ne.Z)(i);function i(){var n;return(0,J.Z)(this,i),n=t.apply(this,arguments),n.state={error:void 0,info:{componentStack:""}},n}return(0,ue.Z)(i,[{key:"componentDidCatch",value:function(u,P){this.setState({error:u,info:P})}},{key:"render",value:function(){var u=this.props,P=u.message,M=u.description,z=u.children,Q=this.state,X=Q.error,O=Q.info,f=O&&O.componentStack?O.componentStack:null,se=typeof P=="undefined"?(X||"").toString():P,re=typeof M=="undefined"?f:M;return X?c.createElement(Se,{type:"error",message:se,description:c.createElement("pre",null,re)}):z}}]),i}(c.Component),Ee=Oe,a=function(E,t){var i={};for(var n in E)Object.prototype.hasOwnProperty.call(E,n)&&t.indexOf(n)<0&&(i[n]=E[n]);if(E!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,n=Object.getOwnPropertySymbols(E);u<n.length;u++)t.indexOf(n[u])<0&&Object.prototype.propertyIsEnumerable.call(E,n[u])&&(i[n[u]]=E[n[u]]);return i},de={success:Y.Z,info:Ze.Z,error:$.Z,warning:Be.Z},Pe={success:j.Z,info:ie.Z,error:H.Z,warning:xe.Z},je=function(t){var i=t.description,n=t.icon,u=t.prefixCls,P=t.type,M=(i?Pe:de)[P]||null;return n?(0,y.wm)(n,c.createElement("span",{className:"".concat(u,"-icon")},n),function(){return{className:Z()("".concat(u,"-icon"),(0,R.Z)({},n.props.className,n.props.className))}}):c.createElement(M,{className:"".concat(u,"-icon")})},Me=function(t){var i=t.isClosable,n=t.closeText,u=t.prefixCls,P=t.closeIcon,M=t.handleClose;return i?c.createElement("button",{type:"button",onClick:M,className:"".concat(u,"-close-icon"),tabIndex:0},n?c.createElement("span",{className:"".concat(u,"-close-text")},n):P):null},fe=function(t){var i,n=t.description,u=t.prefixCls,P=t.message,M=t.banner,z=t.className,Q=z===void 0?"":z,X=t.style,O=t.onMouseEnter,f=t.onMouseLeave,se=t.onClick,re=t.afterClose,ve=t.showIcon,Ne=t.closable,me=t.closeText,w=t.closeIcon,Ie=w===void 0?c.createElement(te.Z,null):w,m=t.action,W=a(t,["description","prefixCls","message","banner","className","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action"]),ge=c.useState(!1),pe=(0,ae.Z)(ge,2),he=pe[0],o=pe[1],C=c.useRef(),g=c.useContext(De.E_),I=g.getPrefixCls,F=g.direction,d=I("alert",u),L=function(p){var U;o(!0),(U=W.onClose)===null||U===void 0||U.call(W,p)},K=function(){var p=W.type;return p!==void 0?p:M?"warning":"info"},k=me?!0:Ne,A=K(),T=M&&ve===void 0?!0:ve,b=Z()(d,"".concat(d,"-").concat(A),(i={},(0,R.Z)(i,"".concat(d,"-with-description"),!!n),(0,R.Z)(i,"".concat(d,"-no-icon"),!T),(0,R.Z)(i,"".concat(d,"-banner"),!!M),(0,R.Z)(i,"".concat(d,"-rtl"),F==="rtl"),i),Q),q=(0,Fe.Z)(W);return c.createElement(Le.Z,{visible:!he,motionName:"".concat(d,"-motion"),motionAppear:!1,motionEnter:!1,onLeaveStart:function(p){return{maxHeight:p.offsetHeight}},onLeaveEnd:re},function(D){var p=D.className,U=D.style;return c.createElement("div",(0,V.Z)({ref:C,"data-show":!he,className:Z()(b,p),style:(0,V.Z)((0,V.Z)({},X),U),onMouseEnter:O,onMouseLeave:f,onClick:se,role:"alert"},q),T?c.createElement(je,{description:n,icon:W.icon,prefixCls:d,type:A}):null,c.createElement("div",{className:"".concat(d,"-content")},P?c.createElement("div",{className:"".concat(d,"-message")},P):null,n?c.createElement("div",{className:"".concat(d,"-description")},n):null),m?c.createElement("div",{className:"".concat(d,"-action")},m):null,c.createElement(Me,{isClosable:!!k,closeText:me,prefixCls:d,closeIcon:Ie,handleClose:L}))})};fe.ErrorBoundary=Ee;var Se=fe},17462:function(Te,ee,e){"use strict";var V=e(38663),ae=e.n(V),R=e(3178),Y=e.n(R)}}]);
